"use strict";(self["webpackChunkeslweb"]=self["webpackChunkeslweb"]||[]).push([[6036],{2418:function(e,o,t){t.d(o,{Z:function(){return f}});var i=t(6252);const a=e=>((0,i.dD)("data-v-71ae169c"),e=e(),(0,i.Cn)(),e),s={key:0,class:"title-container"},l={key:0},r={key:1},n={key:2},c={key:3},d={key:4},u=(0,i.Uk)(" Profile "),p=a((()=>(0,i._)("h4",null,"Please confirm and complete the fields ",-1)));function m(e,o,t,a,m,h){return"add"==t.action?((0,i.wg)(),(0,i.iD)("div",s,[(0,i._)("h3",null,[1==t.i?((0,i.wg)(),(0,i.iD)("span",l,"Educator")):(0,i.kq)("",!0),2==t.i?((0,i.wg)(),(0,i.iD)("span",r,"Recruiter")):(0,i.kq)("",!0),3==t.i?((0,i.wg)(),(0,i.iD)("span",n,"School")):(0,i.kq)("",!0),4==t.i?((0,i.wg)(),(0,i.iD)("span",c,"Other")):(0,i.kq)("",!0),5==t.i?((0,i.wg)(),(0,i.iD)("span",d,"Vendor")):(0,i.kq)("",!0),u]),p])):(0,i.kq)("",!0)}var h={name:"profileTitle",props:["i","action"]},g=t(8118);const b=(0,g.Z)(h,[["render",m],["__scopeId","data-v-71ae169c"]]);var f=b},287:function(e,o,t){t.r(o),t.d(o,{default:function(){return F}});var i=t(261),a=t(7876),s=t(2418),l=t(6252);const r={class:"bg"},n={class:"basic-container"},c={class:"basic-breadcrumb-container"},d=(0,l.Uk)("Home"),u=(0,l.Uk)("Company Contact Person"),p={class:"basic-form"},m={key:1,class:"el-icon-plus avatar-uploader-icon"},h={class:"submit-btn-container"},g=(0,l.Uk)(" Submit ");function b(e,o,t,b,f,_){const y=s.Z,w=a.Z,k=(0,l.up)("el-col"),v=(0,l.up)("el-breadcrumb-item"),S=(0,l.up)("el-breadcrumb"),L=(0,l.up)("el-input"),C=(0,l.up)("el-form-item"),F=(0,l.up)("el-image"),I=(0,l.up)("el-upload"),q=(0,l.up)("el-form"),P=(0,l.up)("el-button"),V=(0,l.up)("el-row"),D=i.Z;return(0,l.wg)(),(0,l.iD)("div",r,[(0,l._)("div",n,[(0,l.Wm)(y,{i:f.i,action:f.action},null,8,["i","action"]),(0,l.Wm)(V,{align:"top",justify:"center"},{default:(0,l.w5)((()=>[f.sideMenuStatus?((0,l.wg)(),(0,l.j4)(k,{key:0,xs:24,sm:24,md:4,lg:4,xl:4},{default:(0,l.w5)((()=>[(0,l.Wm)(w)])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(k,{class:"basic-r-container",xs:24,sm:24,md:20,lg:20,xl:20},{default:(0,l.w5)((()=>[(0,l._)("div",c,[(0,l.Wm)(S,{separator:"/"},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{to:{path:"/"}},{default:(0,l.w5)((()=>[d])),_:1}),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[u])),_:1})])),_:1})]),(0,l._)("div",p,[(0,l.Wm)(q,{ref:"basicForms",model:b.basicForm,rules:b.basicRules,"label-width":"120px","label-position":"top",class:"demo-ruleForm"},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{label:"Display Name",prop:"display_name"},{default:(0,l.w5)((()=>[(0,l.Wm)(L,{modelValue:b.basicForm.display_name,"onUpdate:modelValue":o[0]||(o[0]=e=>b.basicForm.display_name=e),placeholder:"Display Name"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(C,{label:"Job Title",prop:"job_title"},{default:(0,l.w5)((()=>[(0,l.Wm)(L,{modelValue:b.basicForm.job_title,"onUpdate:modelValue":o[1]||(o[1]=e=>b.basicForm.job_title=e),placeholder:"Job Title"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(C,{label:"Profile Photo",prop:"profile_photo"},{default:(0,l.w5)((()=>[(0,l.Wm)(I,{class:"profile-uploader",action:"",headers:f.uploadHeaders,"show-file-list":!1,"http-request":_.profilePhotoHttpRequest,"before-upload":_.beforeProfilePhotoUpload},{default:(0,l.w5)((()=>[f.profilePhotoUrl?((0,l.wg)(),(0,l.j4)(F,{key:0,src:f.profilePhotoUrl,class:"profile-avatar"},null,8,["src"])):((0,l.wg)(),(0,l.iD)("i",m))])),_:1},8,["headers","http-request","before-upload"])])),_:1})])),_:1},8,["model","rules"])]),(0,l._)("div",h,[(0,l.Wm)(P,{type:"primary",class:"submit-btn",loading:b.submitLoadingValue,onClick:o[2]||(o[2]=e=>_.submitForm("basicForms"))},{default:(0,l.w5)((()=>[g])),_:1},8,["loading"])])])),_:1})])),_:1})]),(0,l.Wm)(D,{show:f.uploadLoadingStatus,onOnCancel:o[3]||(o[3]=e=>_.cancelUploadProfile())},null,8,["show"])])}var f=t(8005),_=t.n(f),y=t(1836),w=t(3907),k=t(2931),v=t(4276),S={name:"companyContact",components:{meSideMenu:a.Z,profileTitle:s.Z,xllLoading:i.Z},setup(){const e=(0,w.oR)(),o=o=>{e.commit("identity",o)},t=(0,k.iH)(!1),i=(0,k.iH)(null),a=(0,k.qj)({display_name:"",job_title:"",profile_photo:"",website:""}),s=(0,k.qj)({display_name:[{required:!0,message:"Display Name",trigger:"blur"}],job_title:[{required:!0,message:"Job Title",trigger:"blur"}],profile_photo:[{required:!0,message:"Choose your profile photo",trigger:"change"}]});return{setIdentity:o,submitLoadingValue:t,basicForm:a,basicForms:i,basicRules:s}},data(){return{uploadLoadingStatus:!1,sideMenuStatus:!0,companyId:void 0,uploadActionUrl:"https://api.edupassport.io/api/user/uploadImg",uploadHeaders:{platform:4},uploadData:{token:localStorage.getItem("token")},profilePhotoUrl:"",i:0,action:""}},mounted(){let e=this.$route.query.s;if(e){let o=JSON.parse((0,v.Jx)(e));this.i=o.i,this.action=o.action,"add"==o.action&&(this.sideMenuStatus=!1),"edit"==o.action&&this.getBasicInfo(o.i)}},methods:{cancelUploadProfile(){this.uploadLoadingStatus=!1},getVisitorInfo(e,o){let t={user_id:e,identity:o};(0,y.Vd)(t).then((e=>{if(console.log(e),200==e.code){let o=e.message.user_contact.company;o&&(o.display_name&&(this.basicForm.display_name=o.display_name),o.job_title&&(this.basicForm.job_title=o.job_title),o.website&&(this.basicForm.website=o.website),o.profile_photo&&(this.basicForm.profile_photo=o.profile_photo,this.profilePhotoUrl=o.profile_photo),o.id&&(this.companyId=o.id))}})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},getBasicInfo(e){let o={identity:e};(0,y.Lk)(o).then((e=>{if(console.log(e),200==e.code){let o=e.message.user_contact.company;o&&(o.display_name&&(this.basicForm.display_name=o.display_name),o.job_title&&(this.basicForm.job_title=o.job_title),o.website&&(this.basicForm.website=o.website),o.profile_photo&&(this.basicForm.profile_photo=o.profile_photo,this.profilePhotoUrl=o.profile_photo),o.id&&(this.companyId=o.id))}})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},profilePhotoHttpRequest(e){let o=this;new(_())(e.file,{quality:.6,success(e){const t=new FormData;t.append("token",localStorage.getItem("token"));let i="no";"yes"===i&&(t.append("file[]",e,e.name),(0,y._p)(t).then((e=>{if(200==e.code){let t=e.data[0]["file_url"];o.uploadLoadingStatus=!1,o.profilePhotoUrl=t,o.basicForm.profile_photo=t}})).catch((e=>{console.log(e)}))),"no"===i&&(t.append("file",e,e.name),(0,y.Qz)(t).then((e=>{if(200==e.code){let t=e.message.file_path;o.uploadLoadingStatus=!1,o.profilePhotoUrl=t,o.basicForm.profile_photo=t}})).catch((e=>{console.log(e)})))},error(e){console.log(e.message)}})},beforeProfilePhotoUpload(e){this.uploadLoadingStatus=!0;const o=e.size/1024/1024<20;return o||this.$message.error("Avatar picture size can not exceed 20MB"),o},submitForm(e){let o=this.i,t=this.action;this.submitLoadingValue=!0,this.$refs[e].validate((e=>{if(!e)return console.log("error submit!!"),this.submitLoadingValue=!1,!1;{this.companyId&&(this.basicForm.id=this.companyId);let e=Object.assign({},this.basicForm);2==o&&this.updateRecruiterCompany(e,o,t),3==o&&this.updateSchoolCompany(e,o,t),4==o&&this.updateOtherCompany(e,o,t),5==o&&this.updateVendorCompany(e,o,t)}}))},updateRecruiterCompany(e,o,t){(0,y.qw)(e).then((e=>{if(200==e.code)if("edit"==t)this.$router.push("/business/profile");else{let t={i:o,cid:e.message.recruiting_company_id,action:"add"},i=(0,v.cv)(JSON.stringify(t));this.changeIdentity(o,e.message.recruiting_company_id,2),this.$router.push({path:"/business/edit/recruiter",query:{s:i}})}})).catch((e=>{this.$message.error(e.msg),this.submitLoadingValue=!1}))},updateSchoolCompany(e,o,t){(0,y.Zt)(e).then((e=>{if(console.log(e),200==e.code)if("edit"==t)this.$router.push("/business/profile");else{let t={i:o,cid:e.message.school_company_id,action:"add"},i=(0,v.cv)(JSON.stringify(t));this.changeIdentity(o,e.message.school_company_id,2),this.$router.push({path:"/business/edit/school",query:{s:i}})}})).catch((e=>{this.$message.error(e.msg),this.submitLoadingValue=!1}))},updateOtherCompany(e,o,t){(0,y.Sh)(e).then((e=>{if(console.log(e),200==e.code)if("edit"==t)this.$router.push("/business/profile");else{let t={i:o,cid:e.message.other_company_id,action:"add"},i=(0,v.cv)(JSON.stringify(t));this.changeIdentity(o,e.message.other_company_id,2),this.$router.push({path:"/business/edit/other",query:{s:i}})}})).catch((e=>{this.$message.error(e.msg),this.submitLoadingValue=!1}))},updateVendorCompany(e,o,t){(0,y.G9)(e).then((e=>{if(console.log(e),200==e.code)if("edit"==t)this.$router.push("/vendor/profile");else{let t={i:o,cid:e.message.vendor_company_id,action:"add"},i=(0,v.cv)(JSON.stringify(t));this.changeIdentity(o,e.message.vendor_company_id,2),this.$router.push({path:"/vendor/edit/vendor",query:{s:i}})}})).catch((e=>{this.$message.error(e.msg),this.submitLoadingValue=!1}))},recruiterCalculate(){(0,y.H7)().then((e=>{console.log(e)})).catch((e=>{console.log(e)}))},schoolCalculate(){(0,y.kg)().then((e=>{console.log(e)})).catch((e=>{console.log(e)}))},otherCalculate(){(0,y.yx)().then((e=>{console.log(e)})).catch((e=>{console.log(e)}))},vendorCalculate(){(0,y.OH)().then((e=>{console.log(e)})).catch((e=>{console.log(e)}))},changeIdentity(e,o,t){let i={identity:e,company_id:o,language:t};(0,y.bv)(i).then((t=>{200==t.code&&(localStorage.setItem("identity",e),localStorage.setItem("company_id",o),this.setIdentity(e),2==e&&this.recruiterCalculate(),3==e&&this.schoolCalculate(),4==e&&this.otherCalculate(),5==e&&this.vendorCalculate(),this.submitLoadingValue=!1)})).catch((e=>{console.log(e),this.submitLoadingValue=!1,this.$message.error(e.msg)}))},async submitEducatorContactForm(){let e=Object.assign({},this.basicForm),o=localStorage.getItem("uid"),t=[{zf_referrer_name:""},{zf_redirect_url:""},{zc_gad:""},{SingleLine:o},{SingleLine1:e.first_name},{SingleLine2:e.last_name},{Dropdown:""},{Date:""},{SingleLine3:""},{Email:""},{PhoneNumber_countrycode:""},{SingleLine4:""},{Dropdown1:""},{MultiLine:""},{Number:""},{SingleLine5:""},{SingleLine6:""},{SingleLine7:""},{Dropdown2:""},{MultiLine1:""},{MultiLine2:""},{Dropdown3:""},{MultiLine3:""},{MultiLine4:""},{Website:e.profile_photo},{Website1:""}],i={zoho_data:t,zoho_url:"https://forms.zohopublic.com/edupassport/form/EducatorContactForm/formperma/G014C7ko-MpOp3A2vp6NZlgxhPbGj2HDtbzlZEI6cks/htmlRecords/submit"};await(0,y.Qi)(i).then((e=>{console.log(e)})).catch((e=>{console.log(e)}))}}},L=t(8118);const C=(0,L.Z)(S,[["render",b],["__scopeId","data-v-ec368a36"]]);var F=C}}]);
//# sourceMappingURL=6036.de03e83f.js.map