{"version":3,"file":"js/3928.7ce271ca.js","mappings":"uKAEA,MAAMA,EAAeC,KAAM,QAAa,mBAAoBA,EAAIA,KAAK,UAAeA,GAE9EC,EAAa,CACjBC,MAAO,aAGHC,EAA0BJ,GAAa,KAAmB,IAAAK,GAAoB,KAAM,KAAM,6CAA8C,KAExIC,EAAa,CAACF,GACb,SAASG,EAAOC,EAAMC,EAAQC,EAAQC,EAAQC,EAAOC,GAC1D,MAAMC,GAAqB,QAAkB,WAE7C,OAAO,UAAiB,WAAc,QAAoB,MAAOZ,EAAYI,IAAc,CAAC,CAACQ,EAAoBF,EAAMG,cACzH,C,wBCbA,GACEC,KAAM,WAENC,QACE,MAAMC,GAAQ,UAERC,EAAiBC,GAAQF,EAAMG,OAAO,cAAeD,GAE3D,MAAO,CACLD,iBAEJ,EAEAC,OACE,MAAO,CACLL,aAAa,EAEjB,EAEAO,UACE,IAAIC,EAAeC,KAAKC,OAAOC,MAAMC,KACrCC,QAAQC,IAAIN,GAERA,GACFC,KAAKM,oBAAoBP,EAE7B,EAEAQ,QAAS,CACPD,oBAAoBH,GAClB,IAAIK,EAAS,CACXL,KAAMA,IAER,QAAcK,GAAQC,MAAKC,IAGzB,GAFAN,QAAQC,IAAIK,GAEK,MAAbA,EAAIP,KAAc,CACpBH,KAAKT,aAAc,EACnBoB,aAAaC,QAAQ,QAASF,EAAIG,QAAQC,OAC1CH,aAAaC,QAAQ,MAAOF,EAAIG,QAAQE,IACxCJ,aAAaC,QAAQ,WAAYF,EAAIG,QAAQG,UAC7CL,aAAaC,QAAQ,WAAYF,EAAIG,QAAQI,UAC7CN,aAAaC,QAAQ,QAASF,EAAIG,QAAQK,OAC1C,IAAIF,EAAWN,EAAIG,QAAQG,SAEX,GAAZA,GACFL,aAAaC,QAAQ,OAAQ,SAG/B,IAAIO,EAAY,GACZC,EAAW,GACXC,EAAgB,2CAEJ,GAAZL,IACFG,EAAYT,EAAIG,QAAQS,SAASC,WACjCH,EAAWV,EAAIG,QAAQS,SAASE,UAE5Bd,EAAIG,QAAQS,SAASG,gBACvBJ,EAAgBX,EAAIG,QAAQS,SAASG,gBAIzB,GAAZT,IACFG,EAAYT,EAAIG,QAAQa,SAASH,WACjCH,EAAWV,EAAIG,QAAQa,SAASF,UAE5Bd,EAAIG,QAAQa,SAASD,gBACvBJ,EAAgBX,EAAIG,QAAQa,SAASD,gBAIzB,GAAZT,IACFG,EAAYT,EAAIG,QAAQc,OAAOJ,WAC/BH,EAAWV,EAAIG,QAAQc,OAAOH,UAE1Bd,EAAIG,QAAQc,OAAOF,gBACrBJ,EAAgBX,EAAIG,QAAQc,OAAOF,gBAIvCd,aAAaC,QAAQ,OAAQO,EAAY,IAAMC,GAC/CT,aAAaC,QAAQ,aAAcO,GACnCR,aAAaC,QAAQ,YAAaQ,GAClC,IAAIQ,EAAc,CAChBC,KAAMnB,EAAIG,QAAQE,GAClBC,SAAUA,EACVxB,KAAM2B,EAAY,IAAMC,EACxBU,OAAQT,GAGVrB,KAAKL,eAAeiC,GACpB5B,KAAK+B,QAAQC,KAAK,IACpB,KACCC,OAAMC,IACP9B,QAAQC,IAAI6B,GACZlC,KAAKmC,SAASC,MAAM,gBAAgB,GAExC,I,UC5FJ,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAAStD,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://eslweb/./src/views/login/linkedin.vue?4329","webpack://eslweb/./src/views/login/linkedin.vue","webpack://eslweb/./src/views/login/linkedin.vue?95cd"],"sourcesContent":["import { createElementVNode as _createElementVNode, resolveDirective as _resolveDirective, openBlock as _openBlock, createElementBlock as _createElementBlock, withDirectives as _withDirectives, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-ae7a05f6\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"container\"\n};\n\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", null, \"Logging in via Linkedin, please wait ... \", -1));\n\nconst _hoisted_3 = [_hoisted_2];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _directive_loading = _resolveDirective(\"loading\");\n\n  return _withDirectives((_openBlock(), _createElementBlock(\"div\", _hoisted_1, _hoisted_3)), [[_directive_loading, $data.showLoading]]);\n}","import { LINKEDIN_CODE } from \"@/api/api\";\nimport { useStore } from 'vuex';\nexport default {\n  name: \"linkedin\",\n\n  setup() {\n    const store = useStore();\n\n    const setCurrentUser = data => store.commit('currentUser', data);\n\n    return {\n      setCurrentUser\n    };\n  },\n\n  data() {\n    return {\n      showLoading: true\n    };\n  },\n\n  created() {\n    let linkedinCode = this.$route.query.code;\n    console.log(linkedinCode);\n\n    if (linkedinCode) {\n      this.linkedinLoginByCode(linkedinCode);\n    }\n  },\n\n  methods: {\n    linkedinLoginByCode(code) {\n      let params = {\n        code: code\n      };\n      LINKEDIN_CODE(params).then(res => {\n        console.log(res);\n\n        if (res.code === 200) {\n          this.showLoading = false;\n          localStorage.setItem('token', res.message.token);\n          localStorage.setItem('uid', res.message.id);\n          localStorage.setItem('identity', res.message.identity);\n          localStorage.setItem('language', res.message.language);\n          localStorage.setItem('email', res.message.email);\n          let identity = res.message.identity;\n\n          if (identity == 0) {\n            localStorage.setItem('name', 'Guest');\n          }\n\n          let firstName = '';\n          let lastName = '';\n          let currentAvatar = 'https://oss.esl-passport.cn/educator.png';\n\n          if (identity == 1) {\n            firstName = res.message.educator.first_name;\n            lastName = res.message.educator.last_name;\n\n            if (res.message.educator.profile_photo) {\n              currentAvatar = res.message.educator.profile_photo;\n            }\n          }\n\n          if (identity == 2) {\n            firstName = res.message.business.first_name;\n            lastName = res.message.business.last_name;\n\n            if (res.message.business.profile_photo) {\n              currentAvatar = res.message.business.profile_photo;\n            }\n          }\n\n          if (identity == 3) {\n            firstName = res.message.vendor.first_name;\n            lastName = res.message.vendor.last_name;\n\n            if (res.message.vendor.profile_photo) {\n              currentAvatar = res.message.vendor.profile_photo;\n            }\n          }\n\n          localStorage.setItem('name', firstName + ' ' + lastName);\n          localStorage.setItem('first_name', firstName);\n          localStorage.setItem('last_name', lastName);\n          let currentUser = {\n            uuid: res.message.id,\n            identity: identity,\n            name: firstName + ' ' + lastName,\n            avatar: currentAvatar\n          }; // console.log(currentUser)\n\n          this.setCurrentUser(currentUser);\n          this.$router.push('/');\n        }\n      }).catch(err => {\n        console.log(err);\n        this.$message.error('Service Error');\n      });\n    }\n\n  }\n};","/* unplugin-vue-components disabled */import { render } from \"./linkedin.vue?vue&type=template&id=ae7a05f6&scoped=true\"\nimport script from \"./linkedin.vue?vue&type=script&lang=js\"\nexport * from \"./linkedin.vue?vue&type=script&lang=js\"\n\nimport \"./linkedin.vue?vue&type=style&index=0&id=ae7a05f6&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\workplace\\\\eslweb\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-ae7a05f6\"]])\n\nexport default __exports__"],"names":["_withScopeId","n","_hoisted_1","class","_hoisted_2","_","_hoisted_3","render","_ctx","_cache","$props","$setup","$data","$options","_directive_loading","showLoading","name","setup","store","setCurrentUser","data","commit","created","linkedinCode","this","$route","query","code","console","log","linkedinLoginByCode","methods","params","then","res","localStorage","setItem","message","token","id","identity","language","email","firstName","lastName","currentAvatar","educator","first_name","last_name","profile_photo","business","vendor","currentUser","uuid","avatar","$router","push","catch","err","$message","error","__exports__"],"sourceRoot":""}