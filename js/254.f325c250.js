"use strict";(self["webpackChunkeslweb"]=self["webpackChunkeslweb"]||[]).push([[254],{2744:function(e,a,t){t.d(a,{Z:function(){return p}});var s=t(6252);const o=e=>((0,s.dD)("data-v-91374174"),e=e(),(0,s.Cn)(),e),l={class:"map-container"},i=o((()=>(0,s._)("div",{id:"mapContainer",class:"basemap"},null,-1))),n=[i];function r(e,a,t,o,i,r){return(0,s.wg)(),(0,s.iD)("div",l,n)}var c=t(6158),d=t.n(c),g=t(8847),m=t.n(g),u={name:"mapComponent",props:["lat","lng"],setup(){return{}},data(){return{accessToken:"pk.eyJ1Ijoic3JrbGluZ2UiLCJhIjoiY2t2NnR4anI2OWU5NDJ3bWE1dHd3c3h1aSJ9.O0JfjqiyBBkFuf4G-DQ-DQ",mapStyle:"mapbox://styles/mapbox/streets-v11"}},mounted(){let e=this;setTimeout((function(){e.initMap(e.lng,e.lat)}),2e3)},methods:{initMap(e,a){d().accessToken=this.accessToken;const t=new(d().Map)({container:"mapContainer",center:[e,a],style:this.mapStyle,zoom:12}),s=new(d().NavigationControl);t.addControl(s,"top-right");const o=new(d().GeolocateControl)({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0});t.addControl(o,"top-right");const l=new(m())({accessToken:this.accessToken,mapboxgl:d()});t.addControl(l,"top-left");const i=new(d().Marker);i.setLngLat([e,a]).addTo(t)}}},h=t(8118);const D=(0,h.Z)(u,[["render",r],["__scopeId","data-v-91374174"]]);var p=D},4147:function(e,a,t){t.r(a),t.d(a,{default:function(){return z}});var s=t(2047),o=t(4595),l=t(2744),i=t(5813),n=t(8094),r=t(6252),c=t(6612);const d=e=>((0,r.dD)("data-v-e4c91370"),e=e(),(0,r.Cn)(),e),g={class:"bg"},m={class:"xll-container"},u={class:"dialog-container"},h={class:"action-container"},D={class:"action-l"},p=(0,r.Uk)(" BACK "),f=d((()=>(0,r._)("div",{class:"action-r"},null,-1))),_={class:"dialog-t"},v={class:"img-slot-background"},b={class:"dialog-b"},w={class:"dialog-b-l"},y={class:"dialog-logo"},k=d((()=>(0,r._)("div",{class:"dialog-qrcode"},null,-1))),C={class:"dialog-b-r"},L={class:"dialog-company-name"},S={class:"dialog-company-desc"},I={class:"dialog-title"},V={class:"dialog-desc"},F={class:"dialog-category"},$={class:"share-btn-container"},T=(0,r.Uk)(" SHARE ");function W(e,a,t,d,W,q){const P=n.Z,Z=(0,r.up)("el-col"),x=i.Z,M=(0,r.up)("ArrowLeft"),O=(0,r.up)("el-icon"),J=(0,r.up)("el-button"),R=(0,r.up)("Picture"),z=(0,r.up)("el-image"),A=(0,r.up)("el-avatar"),U=l.Z,B=(0,r.up)("el-space"),j=(0,r.up)("el-scrollbar"),N=(0,r.up)("el-row"),E=o.Z,G=s.Z,H=(0,r.Q2)("loading");return(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",g,[(0,r._)("div",m,[(0,r.Wm)(N,{gutter:0,align:"top",justify:"center"},{default:(0,r.w5)((()=>[(0,r.Wm)(Z,{xs:24,sm:24,md:4,lg:4,xl:4},{default:(0,r.w5)((()=>[(0,r.Wm)(P,{locationData:W.locationOptions,tagsData:W.tagsData,subCateData:W.subCateData,onSearch:q.confirmFilterSearch},null,8,["locationData","tagsData","subCateData","onSearch"])])),_:1}),(0,r.Wm)(Z,{xs:24,sm:24,md:7,lg:7,xl:6},{default:(0,r.w5)((()=>[(0,r.Wm)(x,{adsData:W.adsDataMid,featuredData:W.featuredDealsData,onAddFavorite:q.addFavoriteFeatured,onCancelFavorite:q.cancelFavoriteFeatured,onViewProfile:q.viewProfile,onDetail:q.showDealDetailDialog,onDealDetail:q.turnDealDetail},null,8,["adsData","featuredData","onAddFavorite","onCancelFavorite","onViewProfile","onDetail","onDealDetail"])])),_:1}),(0,r.Wm)(Z,{class:"deal-detail-col",xs:24,sm:24,md:13,lg:13,xl:14},{default:(0,r.w5)((()=>[(0,r.Wm)(j,{class:"deal-detail-scroll"},{default:(0,r.w5)((()=>[(0,r._)("div",u,[(0,r._)("div",h,[(0,r._)("div",D,[(0,r.Wm)(J,{class:"",onClick:a[0]||(a[0]=e=>q.backToSearchResults()),link:""},{default:(0,r.w5)((()=>[(0,r.Wm)(O,null,{default:(0,r.w5)((()=>[(0,r.Wm)(M)])),_:1}),p])),_:1})]),f]),(0,r._)("div",_,[(0,r.Wm)(z,{class:"dialog-background-img",fit:"cover",src:W.companyInfo.background_image},{error:(0,r.w5)((()=>[(0,r._)("div",v,[(0,r.Wm)(O,{size:80,color:"#808080"},{default:(0,r.w5)((()=>[(0,r.Wm)(R)])),_:1})])])),_:1},8,["src"])]),(0,r._)("div",b,[(0,r._)("div",w,[(0,r._)("div",y,[(0,r.Wm)(A,{class:"dialog-logo-img",src:W.companyInfo.logo},null,8,["src"])]),k]),(0,r._)("div",C,[(0,r._)("div",L,(0,c.zw)(W.detailData.company_name),1),(0,r._)("p",S,(0,c.zw)(W.companyInfo.desc),1),(0,r._)("div",{class:"dialog-vendor-profile",onClick:a[1]||(a[1]=e=>q.readMoreDeal(W.detailData.user_id,W.detailData.identity,W.detailData.company_id))}," VENDOR PROFILE "),(0,r._)("div",I,(0,c.zw)(W.detailData.title),1),(0,r._)("p",V,(0,c.zw)(W.detailData.desc),1),2==W.detailData.is_online||3==W.detailData.is_online?((0,r.wg)(),(0,r.j4)(U,{key:0,lng:W.detailData.lng,lat:W.detailData.lat},null,8,["lng","lat"])):(0,r.kq)("",!0),(0,r._)("div",F,[(0,r.Wm)(B,{size:5,wrap:"",spacer:"Â·"},{default:(0,r.w5)((()=>[(0,r._)("span",null,(0,c.zw)(W.companyInfo.category_name_en),1)])),_:1})]),(0,r._)("div",$,[(0,r.Wm)(J,{link:"",onClick:a[2]||(a[2]=e=>q.shareDeal(W.detailData))},{default:(0,r.w5)((()=>[T])),_:1})])])])])])),_:1})])),_:1})])),_:1}),(0,r.Wm)(E,{info:W.dealDetailData,qrcodeValue:W.qrcodeValue,onClose:a[3]||(a[3]=e=>W.dealDetailDialogVisible=!1),onShare:q.shareDeal,onViewProfile:q.viewProfile,visible:W.dealDetailDialogVisible},null,8,["info","qrcodeValue","onShare","onViewProfile","visible"]),(0,r.Wm)(G,{visible:W.shareDialogVisible,title:W.shareInfo.title,description:W.shareInfo.desc,quote:W.shareInfo.desc,url:d.locationUrl,onClose:a[4]||(a[4]=e=>W.shareDialogVisible=!1)},null,8,["visible","title","description","quote","url"])])])),[[H,W.showLoadingStatus]])}var q=t(1836),P=t(6158),Z=t.n(P),x=t(8847),M=t.n(x),O={name:"detail",components:{shareCard:s.Z,dealFilterComponent:n.Z,featuredDealsPromoted:i.Z,dealDetailCard:o.Z},setup(){const e=window.location.href;return{locationUrl:e}},data(){return{subCateData:[],locationValue:"",locationOptions:[],tagValue:[],tagsData:[],dealsListData:[],dealPage:1,dealLimit:10,dealTotalNum:0,sCateId:0,showLoadingStatus:!0,dealDetailDialogVisible:!1,dealDetailData:{},qrcodeValue:"",webDomain:"https://www.edupassport.io",filterIsOnlineValue:!1,detailData:{},accessToken:"pk.eyJ1Ijoic3JrbGluZ2UiLCJhIjoiY2t2NnR4anI2OWU5NDJ3bWE1dHd3c3h1aSJ9.O0JfjqiyBBkFuf4G-DQ-DQ",mapStyle:"mapbox://styles/mapbox/streets-v11",shareDialogVisible:!1,shareInfo:{},filterResultData:{},companyInfo:{},featuredDealsData:[],adsDataMid:[]}},beforeRouteUpdate(e){console.log(e);let a=e.query.id;a&&this.getDealDetail(a)},mounted(){let e=this.$route.query.id;e&&this.getDealDetail(e),this.getFeaturedDealsList(),this.getSubIdentityList(),this.getTagsList(),this.getDealsAreaList(),this.getAdsList()},methods:{confirmFilterSearch(e){console.log(e),this.filterResultData=e,this.getDealsList(this.dealPage,this.dealLimit)},backToSearchResults(){this.$router.go(-1)},readMoreDeal(e,a,t){this.$router.push({path:"/deals/vendor/profile",query:{uid:e,i:a,cid:t}})},showDealDetailDialog(e){this.dealDetailData=e,this.dealDetailDialogVisible=!0,this.qrcodeValue=this.webDomain+"?id="+e.id},turnDealDetail(e){this.$router.push({path:"/deals/detail",query:{id:e}})},shareDeal(e){this.shareDialogVisible=!0,this.shareInfo=e},viewProfile(e,a,t){this.$loading({text:""});let s={user_id:e,identity:a,company_id:t};(0,q.Vd)(s).then((e=>{console.log(e),200==e.code&&(this.companyInfo=e.message.user_contact.company,this.showDealDetailStatus=!0,this.dealDetailDialogVisible=!1,this.$loading().close())})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},turnBanner(e){if(console.log(e),""!=e)window.location.href=e;else{let e=localStorage.getItem("token");if(!e)return void window.open("https://salesiq.zoho.com/signaturesupport.ls?widgetcode=75672d291fd9d5fcab53ffa3194f32598809c21f9b5284cbaf3493087cdd2e0d1a2010ab7b6727677d37b27582c0e9c4","_blank");this.$router.push("/me/ads/platform")}},getAdsList(){let e={page:1,limit:1e4};(0,q.tb)(e).then((e=>{if(200==e.code){let a=[],t=[],s=[],o=localStorage.getItem("identity");o||(a=e.message.filter((e=>"guest_d1"==e.name)),t=e.message.filter((e=>"guest_d2"==e.name)),s=e.message.filter((e=>"guest_d3"==e.name))),1==o&&(a=e.message.filter((e=>"educator_d1"==e.name)),t=e.message.filter((e=>"educator_d2"==e.name)),s=e.message.filter((e=>"educator_d3"==e.name))),2!=o&&3!=o&&4!=o||(a=e.message.filter((e=>"business_d1"==e.name)),t=e.message.filter((e=>"business_d2"==e.name)),s=e.message.filter((e=>"business_d3"==e.name))),5==o&&(a=e.message.filter((e=>"vendor_d1"==e.name)),t=e.message.filter((e=>"vendor_d2"==e.name)),s=e.message.filter((e=>"vendor_d3"==e.name))),a.length>0&&(this.adsDataTop=a[0].data),t.length>0&&(this.adsDataMid=t[0].data),s.length>0&&(this.adsDataBottom=s[0].data)}})).catch((e=>{this.$message.error(e.msg)}))},getSubIdentityList(){let e={pid:5,tree:1};(0,q.cF)(e).then((e=>{console.log(e),200==e.code&&(this.subCateData=e.message)})).catch((e=>{console.log(e),e.msg&&this.$message.error(e.msg),e.message&&this.$message.error(e.message)}))},getTagsList(){let e={page:1,limit:1e3};(0,q.g_)(e).then((e=>{console.log(e),200==e.code&&(this.tagsData=e.message.data)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},getDealsList(e,a){let t=this.filterResultData,s={page:e,limit:a},o=Object.assign(s,t);(0,q.BZ)(o).then((e=>{console.log(e),200==e.code&&(this.dealsListData=e.message.data,this.dealTotalNum=e.message.total,this.showLoadingStatus=!1)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},getDealsAreaList(){(0,q.DP)({}).then((e=>{console.log(e),200==e.code&&(this.locationOptions=e.message)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},dealPageSizeChange(e){console.log(e)},dealPageChange(e){this.showLoadingStatus=!0,this.dealPage=e,this.getDealsList(e,this.dealLimit),document.documentElement.scrollTop=200},addFavorite(e,a,t,s,o){let l={token:localStorage.getItem("token"),type:a,type_id:e,type_title:t,type_url:s};(0,q.q8)(l).then((e=>{console.log(e),200==e.code&&(this.$message.success("Success"),this.dealsListData[o]["is_favorite"]=1)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},cancelFavorite(e,a,t){let s={token:localStorage.getItem("token"),type:e,type_id:a};(0,q.Bv)(s).then((e=>{console.log(e),200==e.code&&(this.dealsListData[t]["is_favorite"]=0)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},addFavoriteFeatured(e,a,t,s,o){let l={token:localStorage.getItem("token"),type:a,type_id:e,type_title:t,type_url:s};(0,q.q8)(l).then((e=>{console.log(e),200==e.code&&(this.$message.success("Success"),this.featuredDealsData[o]["is_favorite"]=1)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},cancelFavoriteFeatured(e,a,t){let s={token:localStorage.getItem("token"),type:e,type_id:a};(0,q.Bv)(s).then((e=>{console.log(e),200==e.code&&(this.featuredDealsData[t]["is_favorite"]=0)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},getFeaturedDealsList(){let e={};(0,q.dV)(e).then((e=>{console.log(e),200==e.code&&(this.featuredDealsData=e.message)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},getDealDetail(e){let a={deal_id:e,token:localStorage.getItem("token")},t=this;(0,q.kR)(a).then((e=>{console.log(e),200==e.code&&(this.detailData=e.message,this.companyInfo=e.message.company,2!=e.message.is_online&&3!=e.message.is_online||setTimeout((function(){t.initMap(e.message.lng,e.message.lat)}),3e3),this.showLoadingStatus=!1)})).catch((e=>{console.log(e),e.msg&&this.$message.error(e.msg),e.message&&this.$message.error(e.message)}))},initMap(e,a){Z().accessToken=this.accessToken;const t=new(Z().Map)({container:"mapContainer",center:[e,a],style:this.mapStyle,zoom:12}),s=new(Z().NavigationControl);t.addControl(s,"top-right");const o=new(Z().GeolocateControl)({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0});t.addControl(o,"top-right");const l=new(M())({accessToken:this.accessToken,mapboxgl:Z()});t.addControl(l,"top-left");const i=new(Z().Marker);i.setLngLat([e,a]).addTo(t)}}},J=t(8118);const R=(0,J.Z)(O,[["render",W],["__scopeId","data-v-e4c91370"]]);var z=R}}]);
//# sourceMappingURL=254.f325c250.js.map