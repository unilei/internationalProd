"use strict";(self["webpackChunkeslweb"]=self["webpackChunkeslweb"]||[]).push([[3928],{3928:function(e,s,t){t.r(s),t.d(s,{default:function(){return h}});var a=t(6252);const o=e=>((0,a.dD)("data-v-ae7a05f6"),e=e(),(0,a.Cn)(),e),n={class:"container"},r=o((()=>(0,a._)("h1",null,"Logging in via Linkedin, please wait ... ",-1))),i=[r];function l(e,s,t,o,r,l){const g=(0,a.Q2)("loading");return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",n,i)),[[g,r.showLoading]])}var g=t(1836),m=t(3907),d={name:"linkedin",setup(){const e=(0,m.oR)(),s=s=>e.commit("currentUser",s);return{setCurrentUser:s}},data(){return{showLoading:!0}},created(){let e=this.$route.query.code;console.log(e),e&&this.linkedinLoginByCode(e)},methods:{linkedinLoginByCode(e){let s={code:e};(0,g.tj)(s).then((e=>{if(console.log(e),200===e.code){this.showLoading=!1,localStorage.setItem("token",e.message.token),localStorage.setItem("uid",e.message.id),localStorage.setItem("identity",e.message.identity),localStorage.setItem("language",e.message.language),localStorage.setItem("email",e.message.email);let s=e.message.identity;0==s&&localStorage.setItem("name","Guest");let t="",a="",o="https://oss.esl-passport.cn/educator.png";1==s&&(t=e.message.educator.first_name,a=e.message.educator.last_name,e.message.educator.profile_photo&&(o=e.message.educator.profile_photo)),2==s&&(t=e.message.business.first_name,a=e.message.business.last_name,e.message.business.profile_photo&&(o=e.message.business.profile_photo)),3==s&&(t=e.message.vendor.first_name,a=e.message.vendor.last_name,e.message.vendor.profile_photo&&(o=e.message.vendor.profile_photo)),localStorage.setItem("name",t+" "+a),localStorage.setItem("first_name",t),localStorage.setItem("last_name",a);let n={uuid:e.message.id,identity:s,name:t+" "+a,avatar:o};this.setCurrentUser(n),this.$router.push("/")}})).catch((e=>{console.log(e),this.$message.error("Service Error")}))}}},c=t(8118);const u=(0,c.Z)(d,[["render",l],["__scopeId","data-v-ae7a05f6"]]);var h=u}}]);
//# sourceMappingURL=3928.7ce271ca.js.map