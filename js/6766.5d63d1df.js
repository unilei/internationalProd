"use strict";(self["webpackChunkeslweb"]=self["webpackChunkeslweb"]||[]).push([[6766],{2699:function(e,t,o){o.r(t),o.d(t,{default:function(){return _}});var s=o(9788),a=o(2084),i=o(6252);const n={class:"bg"};function l(e,t,o,l,r,c){const g=(0,i.up)("ExchangeAccountInfo"),d=a.Z,h=(0,i.up)("el-col"),u=s.Z,m=(0,i.up)("businessProfile",!0),b=(0,i.up)("el-row"),p=(0,i.Q2)("loading");return(0,i.wg)(),(0,i.iD)("div",n,[l.exchangeAccountInfo?((0,i.wg)(),(0,i.j4)(g,{key:0,info:l.exchangeAccountInfo},null,8,["info"])):(0,i.kq)("",!0),(0,i.Wm)(b,{class:"bg-container",gutter:0,align:"top",justify:"center"},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{class:"jobs-filter-col",xs:22,sm:22,md:4,lg:4,xl:4},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{onSearch:c.searchByFilter},null,8,["onSearch"])])),_:1}),(0,i.Wm)(h,{class:"jobs-list-col",xs:24,sm:24,md:8,lg:8,xl:8},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{jobListData:r.otherJobListData,adsData:r.jobsAdsListMid,selectedJobId:r.selectedJobId,jobLimit:r.otherJobLimit,jobTotalNum:r.otherJobTotalNum,jobPage:r.otherJobPage,isOther:!0,companyInfo:r.companyInfo,loading:r.jobLoadingValue,loadingFeatured:r.jobFeaturedLoadingValue,onJobDetailEvent:c.turnJobDetail,onBackToResults:c.backToResults,onJobPageChange:c.otherJobPageChange,onAddFavorite:c.addFavorite,onCancelFavorite:c.cancelFavorite},null,8,["jobListData","adsData","selectedJobId","jobLimit","jobTotalNum","jobPage","companyInfo","loading","loadingFeatured","onJobDetailEvent","onBackToResults","onJobPageChange","onAddFavorite","onCancelFavorite"])])),_:1}),(0,i.wy)(((0,i.wg)(),(0,i.j4)(h,{class:"job-detail-col",xs:24,sm:24,md:12,lg:12,xl:12},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{canEdit:!1,fromDeal:!1,info:r.companyInfo,identity:r.identity},null,8,["info","identity"])])),_:1})),[[p,r.showLoadingStatus]])])),_:1})])}var r=o(8339),c=o(1836),g=o(6492),d=o(5162),h=o(6158),u=o.n(h),m=o(8847),b=o.n(m),p={name:"detail",data(){return{jobLoadingValue:!1,jobFeaturedLoadingValue:!1,companyInfo:{},identity:0,jobFeaturedListData:[],showLoadingStatus:!1,detailData:{},selectedJobId:0,accessToken:"pk.eyJ1Ijoic3JrbGluZ2UiLCJhIjoiY2t2NnR4anI2OWU5NDJ3bWE1dHd3c3h1aSJ9.O0JfjqiyBBkFuf4G-DQ-DQ",mapStyle:"mapbox://styles/mapbox/streets-v11",otherJobPage:1,otherJobLimit:10,otherJobTotalNum:0,otherJobListData:[],jobsAdsListMid:[]}},components:{ExchangeAccountInfo:d.Z,jobsListComponent:s.Z,BusinessProfile:g.Z,filterWithJobList:a.Z},setup(){let e=(0,r.tv)(),t=(0,r.yj)();const o=t.query.exchange_job,s=e=>{console.log(e)},a=()=>{console.log("slide change")},i=t=>{e.push({path:"/jobs",query:t})};return{onSwiper:s,onSlideChange:a,skipJobsList:i,exchangeAccountInfo:o}},beforeRouteUpdate(e){console.log(e)},mounted(){let e=this.$route.query.uid,t=this.$route.query.i,o=this.$route.query.cid,s=this.$route.query.jobId;e&&t&&o&&s&&(this.identity=t,this.getCompanyJobList(e,this.otherJobPage,this.otherJobLimit),this.getVisitorUserInfo(e,t,o),this.selectedJobId=s),this.getAdsList()},methods:{getVisitorUserInfo(e,t,o){let s={user_id:e,identity:t,company_id:o};this.showLoadingStatus=!0,(0,c.Vd)(s).then((e=>{console.log(e),200==e.code&&(this.companyInfo=e.message.user_contact.company,this.showLoadingStatus=!1)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},searchByFilter(e){console.log(e),this.jobLoadingValue=!0;let t={user_id:this.companyInfo.user_id,is_open:1,status:1,page:this.otherJobPage,limit:this.otherJobLimit},o=e.job_title;o&&(t.job_title=o);let s=e.salary;s&&(t.salary_begin=1e3*s[0],t.salary_end=1e3*s[1]);let a="production";e.location&&("development"!==a&&"production"!==a||(t.country=e.location),"developmentCN"!==a&&"productionCN"!==a||(t.city=e.location)),e.employment_type&&(t.employment_type=e.employment_type),e.student_age&&(t.age_to_teach=e.student_age),(0,c.kM)(t).then((e=>{if(200==e.code){let t=e.message;console.log(t.data),t.data?this.otherJobListData=e.message.data:this.otherJobListData=[],t.total&&(this.otherJobTotalNum=e.message.total),this.jobLoadingValue=!1}else console.log(e.msg)})).catch((e=>{console.log(e),this.jobLoadingValue=!1,e.msg&&this.$message.error(e.msg),e.message&&this.$message.error(e.message)}))},initMap(e,t){u().accessToken=this.accessToken;const o=new(u().Map)({container:"mapContainer",center:[e,t],style:this.mapStyle,zoom:12}),s=new(u().NavigationControl);o.addControl(s,"top-right");const a=new(u().GeolocateControl)({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0});o.addControl(a,"top-right");const i=new(b())({accessToken:this.accessToken,mapboxgl:u()});o.addControl(i,"top-left");const n=new(u().Marker);n.setLngLat([e,t]).addTo(o)},turnBanner(e){if(console.log(e),""!=e)window.location.href=e;else{let e=localStorage.getItem("token");if(!e)return void window.open("https://salesiq.zoho.com/signaturesupport.ls?widgetcode=75672d291fd9d5fcab53ffa3194f32598809c21f9b5284cbaf3493087cdd2e0d1a2010ab7b6727677d37b27582c0e9c4","_blank");this.$router.push("/me/ads/platform")}},getAdsList(){let e={page:1,limit:1e4};(0,c.tb)(e).then((e=>{if(200==e.code){let t=[],o=localStorage.getItem("identity");o||(t=e.message.filter((e=>"guest_j3"==e.name))),1==o&&(t=e.message.filter((e=>"educator_j3"==e.name))),2!=o&&3!=o&&4!=o||(t=e.message.filter((e=>"business_j3"==e.name))),5==o&&(t=e.message.filter((e=>"vendor_j3"==e.name))),t.length>0&&(this.jobsAdsListMid=t[0].data)}})).catch((e=>{e.msg&&this.$message.error(e.msg),e.message&&this.$message.error(e.message)}))},addFavorite(e,t,o,s,a){let i={token:localStorage.getItem("token"),type:t,type_id:e,type_title:o,type_url:s};(0,c.q8)(i).then((e=>{console.log(e),200==e.code&&(this.$message.success("Success"),this.otherJobListData[a]["is_favorite"]=1)})).catch((e=>{console.log(e),e.msg&&this.$message.error(e.msg),e.message&&this.$message.error(e.message)}))},cancelFavorite(e,t,o){let s={token:localStorage.getItem("token"),type:e,type_id:t};(0,c.Bv)(s).then((e=>{console.log(e),200==e.code&&(this.otherJobListData[o]["is_favorite"]=0)})).catch((e=>{console.log(e),e.msg&&this.$message.error(e.msg),e.message&&this.$message.error(e.message)}))},getCompanyJobList(e,t,o){this.jobLoadingValue=!0;let s={user_id:e,is_open:1,status:1,page:t,limit:o},a=this.salaryValue;""!=a&&(1==a&&(s.salary_begin=0,s.salary_end=5e3),2==a&&(s.salary_begin=5e3,s.salary_end=1e4),3==a&&(s.salary_begin=1e4,s.salary_end=15e3),4==a&&(s.salary_begin=15e3));let i="production";""!=this.locationValue&&("development"!==i&&"production"!==i||(s.country=this.locationValue),"developmentCN"!==i&&"productionCN"!==i||(s.city=this.locationValue)),""!=this.genderValue&&(s.sex=this.genderValue),""!=this.jobTypeValue&&(s.employment_type=this.jobTypeValue),""!=this.studentAgeValue&&(s.age_to_teach=this.studentAgeValue),s.is_online=this.onlineValue,(0,c.kM)(s).then((e=>{console.log(e),200==e.code&&(this.otherJobListData=e.message.data,this.otherJobTotalNum=e.message.total,this.jobLoadingValue=!1)})).catch((e=>{console.log(e),this.jobLoadingValue=!1,e.msg&&this.$message.error(e.msg),e.message&&this.$message.error(e.message)}))},otherJobPageChange(e){console.log(e),this.otherJobPage=e,this.getCompanyJobList(this.companyInfo.user_id,e,this.otherJobLimit)},backToResults(){this.$router.go(-1)},turnJobDetail(e){this.$router.push({path:"/jobs/detail",query:{id:e}})},getJobFeaturedList(){let e={ad_type:2};(0,c.Rn)(e).then((e=>{console.log(e),200===e.code?this.jobFeaturedListData=e.message:console.log(e.msg)})).catch((e=>{console.log(e)}))}}},y=o(8118);const f=(0,y.Z)(p,[["render",l],["__scopeId","data-v-95d925ae"]]);var _=f}}]);
//# sourceMappingURL=6766.5d63d1df.js.map