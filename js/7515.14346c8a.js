"use strict";(self["webpackChunkeslweb"]=self["webpackChunkeslweb"]||[]).push([[7515],{7876:function(e,t,a){a.d(t,{Z:function(){return _}});var s=a(6252),o=a(6612);const l={class:"menu-btn-container"},i=(0,s.Uk)("Menu"),n={key:0,class:"profile-l-container"},c={class:"l-container"},r=["Key"];function d(e,t,a,d,u,g){const m=(0,s.up)("el-button"),h=(0,s.up)("el-image"),p=(0,s.up)("router-link"),b=(0,s.up)("el-scrollbar");return(0,s.wg)(),(0,s.j4)(b,{class:"menu-xll-bg-container"},{default:(0,s.w5)((()=>[(0,s._)("div",l,[(0,s.Wm)(m,{class:"menu-btn",type:"primary",onClick:t[0]||(t[0]=e=>g.showSideMenu())},{default:(0,s.w5)((()=>[i])),_:1})]),u.showSideMenuStatus?((0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("div",c,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(g.menuData,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"l-item l-item-margin",Key:t},[(0,s.Wm)(p,{class:(0,o.C_)(d.selectedKeys===e.link?"router-link-exact-active":""),to:{path:e.link},exact:""},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{class:"xll-icon-image",src:e.icon},null,8,["src"]),(0,s._)("span",null,(0,o.zw)(e.menu_name_en),1)])),_:2},1032,["class","to"])],8,r)))),256))])])):(0,s.kq)("",!0)])),_:1})}var u=a(1474),g=a(1836),m=a(5323),h=a(3907),p=a(8339),b=a(2931),w={name:"meSideMenu",setup(){const e=(0,h.oR)(),t=t=>e.commit("nowChatUserInfo",t),a=()=>e.commit("showChatStatus",!0),s=(0,p.yj)(),o=s.meta.activeMenu,l=(0,b.iH)(o||s.path);return{setNowChatUserInfo:t,setShowChatStatus:a,selectedKeys:l}},data(){return{defaultAvatar:m,accountInfo:{},accountPhotoValue:"",versionTime:(0,u.O1)(),activeMsg:!1,showSideMenuStatus:!0}},watch:{menuData(e){console.log(e)}},computed:{username:{get(){return this.$store.state.username}},userAvatar:{get(){return this.$store.state.userAvatar}},identity:{get(){return this.$store.state.identity}},menuData:{get(){return this.$store.state.menuData}}},mounted(){let e=document.body.clientWidth;Math.floor(e)<768&&(this.showSideMenuStatus=!1),Math.floor(e)>=768&&Math.floor(e)<992&&(this.showSideMenuStatus=!0),Math.floor(e)>=992&&Math.floor(e)<1200&&(this.showSideMenuStatus=!0),Math.floor(e)>=1200&&(this.showSideMenuStatus=!0),window.onresize=()=>{let e=document.body.clientWidth;Math.floor(e)<768&&(this.showSideMenuStatus=!1),Math.floor(e)>=768&&Math.floor(e)<992&&(this.showSideMenuStatus=!0),Math.floor(e)>=992&&Math.floor(e)<1200&&(this.showSideMenuStatus=!0),Math.floor(e)>=1200&&(this.showSideMenuStatus=!0)}},methods:{showSideMenu(){this.showSideMenuStatus=!this.showSideMenuStatus},getUserMenuList(){let e=this,t={user_id:localStorage.getItem("uid"),identity:e.identity,company_id:localStorage.getItem("company_id"),create_user_id:localStorage.getItem("c_uid"),page:1,limit:1e3};(0,g.$Z)(t).then((t=>{if(200===t.code){let a=t.message.pc,s=a.filter((t=>t.identity==e.identity));this.$store.commit("menuData",s)}})).catch((e=>{console.log(e)}))},turnMyMessages(){this.setShowChatStatus()}}},y=a(8118);const v=(0,y.Z)(w,[["render",d],["__scopeId","data-v-73c372ce"]]);var _=v},7515:function(e,t,a){a.r(t),a.d(t,{default:function(){return X}});var s=a(7876),o=a(6252),l=a(6612);const i=e=>((0,o.dD)("data-v-3b0440a6"),e=e(),(0,o.Cn)(),e),n={class:"bg"},c={class:"profile-container"},r={class:"profile-l-container"},d={class:"profile-r-container"},u={class:"new-deal-t"},g=i((()=>(0,o._)("div",{class:"new-deal-t-l"},"New deal",-1))),m={class:"new-deal-t-r"},h=(0,o.Uk)(" DISCARD "),p=(0,o.Uk)(" SUBMIT "),b={class:"basic-form"},w=i((()=>(0,o._)("div",{class:"basic-form-label"}," Deal information ",-1))),y=i((()=>(0,o._)("div",{class:"tags-tips"}," Tags will help find your deal easier ",-1))),v={class:"object-tags-add"},_={class:"object-tags-item-add"},f={class:"object-tags-item-btn-container"},C=(0,o.Uk)(" ADD "),k={class:"object-tags-container"},T={class:"object-tags"},D=["onClick"],S={class:"object-tags"},L=["onClick"],O={class:"deals-location-bg"},j={class:"deals-tabs-container"},M={key:0,class:"deals-location-container"},V=i((()=>(0,o._)("div",{class:"deals-tips"}," This deal is only available online ",-1))),F=[V],W={key:1,class:"deals-location-container"},N={class:"deals-location-select-container"},U={class:"map-container"},I=i((()=>(0,o._)("div",{id:"mapContainer",class:"basemap"},null,-1))),$=[I],x={key:2,class:"deals-location-container"},A=i((()=>(0,o._)("div",{class:"deals-tips"}," This deal is available online and at the location below ",-1))),H={class:"deals-location-select-container"},K={class:"map-container"},q=i((()=>(0,o._)("div",{id:"mapContainer1",class:"basemap"},null,-1))),P=[q];function Y(e,t,a,i,V,I){const q=s.Z,Y=(0,o.up)("el-button"),E=(0,o.up)("el-input"),z=(0,o.up)("el-form-item"),Z=(0,o.up)("el-col"),J=(0,o.up)("el-row"),Q=(0,o.up)("el-option"),R=(0,o.up)("el-select"),B=(0,o.up)("el-form"),G=(0,o.up)("el-scrollbar"),X=(0,o.Q2)("loading");return(0,o.wg)(),(0,o.iD)("div",n,[(0,o._)("div",c,[(0,o._)("div",r,[(0,o.Wm)(q)]),(0,o._)("div",d,[(0,o._)("div",u,[g,(0,o._)("div",m,[(0,o.Wm)(Y,{class:"new-deal-btn",link:"",round:"",onClick:t[0]||(t[0]=e=>I.discard())},{default:(0,o.w5)((()=>[h])),_:1}),(0,o.Wm)(Y,{class:"new-deal-btn",type:"primary",round:"",loading:V.submitLoadingValue,onClick:t[1]||(t[1]=e=>I.submitForm("basicForm"))},{default:(0,o.w5)((()=>[p])),_:1},8,["loading"])])]),(0,o.Wm)(G,{class:"profile-r-bg-container"},{default:(0,o.w5)((()=>[(0,o._)("div",b,[w,(0,o.Wm)(B,{ref:"basicForm",model:V.basicForm,rules:V.basicRules,"label-width":"120px","label-position":"top",class:"deals-form"},{default:(0,o.w5)((()=>[(0,o.Wm)(J,{gutter:50},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{span:6},{default:(0,o.w5)((()=>[(0,o.Wm)(z,{label:"Deal Name",prop:"title"},{default:(0,o.w5)((()=>[(0,o.Wm)(E,{modelValue:V.basicForm.title,"onUpdate:modelValue":t[2]||(t[2]=e=>V.basicForm.title=e),placeholder:"eg. 10% off your first class."},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(Z,{span:18},{default:(0,o.w5)((()=>[(0,o.Wm)(z,{label:"Deal Description",prop:"desc"},{default:(0,o.w5)((()=>[(0,o.Wm)(E,{modelValue:V.basicForm.desc,"onUpdate:modelValue":t[3]||(t[3]=e=>V.basicForm.desc=e),type:"textarea",rows:4,placeholder:"Provide a paragraph or two about the deal and how to redeem it."},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,o.Wm)(J,{gutter:50},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{span:6},{default:(0,o.w5)((()=>[(0,o.Wm)(z,{label:"Tags"},{default:(0,o.w5)((()=>[y,(0,o._)("div",v,[(0,o._)("div",_,[(0,o.Wm)(E,{type:"text",modelValue:V.ownTagsValue,"onUpdate:modelValue":t[4]||(t[4]=e=>V.ownTagsValue=e),placeholder:'Click "add" after each entry '},null,8,["modelValue"]),(0,o._)("div",f,[(0,o.Wm)(Y,{class:"object-tags-item-btn",type:"primary",link:"",disabled:!V.ownTagsValue,onClick:I.addOwnTag},{default:(0,o.w5)((()=>[C])),_:1},8,["disabled","onClick"])])])]),(0,o._)("div",k,[(0,o._)("div",T,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(V.tagsData,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:(0,l.C_)(["object-tags-item",-1==V.selectTagsList.indexOf(e.id)?"":"tags-active"]),key:t,onClick:t=>I.selectTagA(e)},(0,l.zw)(e.name_en),11,D)))),128))]),(0,o._)("div",S,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(V.ownTagsList,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:(0,l.C_)(["object-tags-item",-1==V.selectTagsList.indexOf(e)?"":"tags-active"]),key:t,onClick:t=>I.selectTagA(e)},(0,l.zw)(e),11,L)))),128))])])])),_:1})])),_:1}),(0,o.Wm)(Z,{span:18},{default:(0,o.w5)((()=>[(0,o.Wm)(z,{label:"Deal Location"},{default:(0,o.w5)((()=>[(0,o._)("div",O,[(0,o._)("div",j,[(0,o._)("div",{class:(0,l.C_)(["deals-tabs-l",1===V.dealLocationType?"tags-active":""]),onClick:t[5]||(t[5]=e=>I.changeDealLocationType(1))}," ONLINE ",2),(0,o._)("div",{class:(0,l.C_)(["deals-tabs-m",2===V.dealLocationType?"tags-active":""]),onClick:t[6]||(t[6]=e=>I.changeDealLocationType(2))}," OFFLINE ",2),(0,o._)("div",{class:(0,l.C_)(["deals-tabs-r",3===V.dealLocationType?"tags-active":""]),onClick:t[7]||(t[7]=e=>I.changeDealLocationType(3))}," BOTH ",2)]),1===V.dealLocationType?((0,o.wg)(),(0,o.iD)("div",M,F)):(0,o.kq)("",!0),2===V.dealLocationType?((0,o.wg)(),(0,o.iD)("div",W,[(0,o._)("div",N,[(0,o.Wm)(R,{modelValue:V.countryObj,"onUpdate:modelValue":t[8]||(t[8]=e=>V.countryObj=e),onChange:I.countryChange,"value-key":"id",filterable:"",placeholder:"Select Country"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(V.countryOptions,((e,t)=>((0,o.wg)(),(0,o.j4)(Q,{key:t,label:e.name,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),V.provinceOptions.length>0?((0,o.wg)(),(0,o.j4)(R,{key:0,modelValue:V.provinceObj,"onUpdate:modelValue":t[9]||(t[9]=e=>V.provinceObj=e),"value-key":"id",filterable:"",onChange:I.provinceChange,placeholder:"Select Province"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(V.provinceOptions,((e,t)=>((0,o.wg)(),(0,o.j4)(Q,{key:t,label:e.name,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])):(0,o.kq)("",!0),V.cityOptions.length>0?((0,o.wg)(),(0,o.j4)(R,{key:1,modelValue:V.cityObj,"onUpdate:modelValue":t[10]||(t[10]=e=>V.cityObj=e),"value-key":"id",filterable:"",onChange:I.cityChange,placeholder:"Select City"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(V.cityOptions,((e,t)=>((0,o.wg)(),(0,o.j4)(Q,{key:t,label:e.name,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])):(0,o.kq)("",!0)]),(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",U,$)),[[X,V.mapLoading]])])):(0,o.kq)("",!0),3===V.dealLocationType?((0,o.wg)(),(0,o.iD)("div",x,[A,(0,o._)("div",H,[(0,o.Wm)(R,{modelValue:V.countryObj,"onUpdate:modelValue":t[11]||(t[11]=e=>V.countryObj=e),onChange:I.countryChange,"value-key":"id",filterable:"",placeholder:"Select Country"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(V.countryOptions,((e,t)=>((0,o.wg)(),(0,o.j4)(Q,{key:t,label:e.name,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),V.provinceOptions.length>0?((0,o.wg)(),(0,o.j4)(R,{key:0,modelValue:V.provinceObj,"onUpdate:modelValue":t[12]||(t[12]=e=>V.provinceObj=e),"value-key":"id",filterable:"",onChange:I.provinceChange,placeholder:"Select Province"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(V.provinceOptions,((e,t)=>((0,o.wg)(),(0,o.j4)(Q,{key:t,label:e.name,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])):(0,o.kq)("",!0),V.cityOptions.length>0?((0,o.wg)(),(0,o.j4)(R,{key:1,modelValue:V.cityObj,"onUpdate:modelValue":t[13]||(t[13]=e=>V.cityObj=e),"value-key":"id",filterable:"",onChange:I.cityChange,placeholder:"Select City"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(V.cityOptions,((e,t)=>((0,o.wg)(),(0,o.j4)(Q,{key:t,label:e.name,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])):(0,o.kq)("",!0)]),(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",K,P)),[[X,V.map1Loading]])])):(0,o.kq)("",!0)])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])])])),_:1})])])])}var E=a(1836),z=a(6158),Z=a.n(z),J=a(8847),Q=a.n(J),R={name:"jobs",components:{meSideMenu:s.Z},data(){return{submitLoadingValue:!1,mapLoading:!1,map1Loading:!1,accessToken:"pk.eyJ1Ijoic3JrbGluZ2UiLCJhIjoiY2t2NnR4anI2OWU5NDJ3bWE1dHd3c3h1aSJ9.O0JfjqiyBBkFuf4G-DQ-DQ",mapStyle:"mapbox://styles/mapbox/streets-v11",dealLocationTypeValue:"1",userInfo:{},basicUserInfo:{},tagsData:[],addTagsStatus:!1,ownTagsValue:"",ownTagsList:[],selectTagsList:[],selectTagsArr:[],tagsCnData:[],tagsEnData:[],countryObj:{},provinceObj:{},cityObj:{},countryName:"",countryNameCn:"",provinceName:"",provinceNameCn:"",cityName:"",cityNameCn:"",countryOptions:[],provinceOptions:[],cityOptions:[],basicForm:{token:localStorage.getItem("token"),user_id:localStorage.getItem("uid"),title:"",desc:"",tag:"",is_online:0,location:"",country_id:"",state_id:"",town_id:"",lng:"",lat:"",tags_cn:"",tags_en:""},basicRules:{title:[{required:!0,message:"Please input",trigger:"blur"}],desc:[{required:!0,message:"Please input",trigger:"blur"}]},dealLocationType:1}},mounted(){this.getTagsList(),this.getAllCountry()},methods:{changeDealLocationType(e){this.dealLocationType=e;let t=this;2==e&&(this.mapLoading=!0,setTimeout((function(){t.initMap(),t.mapLoading=!1}),1e3)),3==e&&(this.map1Loading=!0,setTimeout((function(){t.initMap1(),t.map1Loading=!1}),1e3))},initMap(){Z().accessToken=this.accessToken;const e=new(Z().Map)({container:"mapContainer",center:[121.472644,31.231706],style:this.mapStyle,zoom:12}),t=new(Z().NavigationControl);e.addControl(t,"top-right");const a=new(Z().GeolocateControl)({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0});e.addControl(a,"top-right");const s=new(Q())({accessToken:this.accessToken,mapboxgl:Z()});e.addControl(s,"top-left");const o=new(Z().Marker);s.on("result",(t=>{console.log(t),o.setLngLat(t.result.center).addTo(e),this.basicForm.location=t.result.place_name,this.basicForm.lng=t.result.center[0],this.basicForm.lat=t.result.center[1]})),s.on("clear",(e=>{console.log(e),this.basicForm.location="",this.basicForm.lng="",this.basicForm.lat=""}))},initMap1(){Z().accessToken=this.accessToken;const e=new(Z().Map)({container:"mapContainer1",center:[121.472644,31.231706],style:this.mapStyle,zoom:12}),t=new(Z().NavigationControl);e.addControl(t,"top-right");const a=new(Z().GeolocateControl)({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0});e.addControl(a,"top-right");const s=new(Q())({accessToken:this.accessToken,mapboxgl:Z()});e.addControl(s,"top-left");const o=new(Z().Marker);s.on("result",(t=>{console.log(t),o.setLngLat(t.result.center).addTo(e),this.basicForm.location=t.result.place_name,this.basicForm.lng=t.result.center[0],this.basicForm.lat=t.result.center[1]})),s.on("clear",(e=>{console.log(e),this.basicForm.location="",this.basicForm.lng="",this.basicForm.lat=""}))},getAllCountry(){let e={};(0,E.PQ)(e).then((e=>{console.log(e),200==e.code&&(this.countryOptions=e.message)})).catch((e=>{this.$message.error(e.msg)}))},getAllProvinces(e){let t={country_id:e};(0,E.PQ)(t).then((e=>{console.log(e),200==e.code&&(this.provinceOptions=e.message)})).catch((e=>{this.$message.error(e.msg)}))},getAllCitys(e,t){let a={country_id:e,state_id:t};(0,E.PQ)(a).then((e=>{console.log(e),200==e.code&&(this.cityOptions=e.message)})).catch((e=>{this.$message.error(e.msg)}))},countryChange(e){console.log(e),this.basicForm.state_id=void 0,this.basicForm.town_id=void 0,this.provinceOptions=[],this.cityOptions=[],this.basicForm.country_id=e.id,this.countryName=e.name,this.countryNameCn=e.name,this.getAllProvinces(e.id)},provinceChange(e){console.log(e),this.basicForm.town_id=void 0,this.cityOptions=[],this.basicForm.state=e.id,this.provinceName=e.name,this.provinceNameCn=e.name,this.getAllCitys(this.basicForm.country_id,e.id)},cityChange(e){console.log(e),this.basicForm.town_id=e.id,this.cityName=e.name,this.cityNameCn=e.name},getTagsList(){let e={page:1,limit:1e3};(0,E.dD)(e).then((e=>{console.log(e),200==e.code&&(this.tagsData=e.message.data)})).catch((e=>{console.log(e),e.msg&&this.$message.error(e.msg),e.message&&this.$message.error(e.message)}))},addOwnTag(){this.addTagsStatus=!1;let e=localStorage.getItem("token"),t={token:e,tag_name:this.ownTagsValue};(0,E.D)(t).then((e=>{if(console.log(e),200==e.code&&0==e.message){let e=this.ownTagsList.indexOf(this.ownTagsValue);-1==e&&this.ownTagsList.push(this.ownTagsValue);let t=this.selectTagsList.indexOf(this.ownTagsValue);-1==t?(this.selectTagsList.push(this.ownTagsValue),this.tagsCnData.push(this.ownTagsValue),this.tagsEnData.push(this.ownTagsValue)):(this.selectTagsList.splice(t,1),this.tagsCnData.splice(t,1),this.tagsEnData.splice(t,1)),this.ownTagsValue=""}}))},selectTagA(e){let t=this.selectTagsList.indexOf(e.id);-1==t?(this.selectTagsList.push(e.id),this.tagsCnData.push(e.name_cn),this.tagsEnData.push(e.name_en)):(this.selectTagsList.splice(t,1),this.tagsCnData.splice(t,1),this.tagsEnData.splice(t,1))},submitForm(e){this.$refs[e].validate((e=>{if(!e)return console.log("error submit!!"),!1;{this.basicForm.tag=this.selectTagsList,this.basicForm.tags_cn=this.tagsCnData.join(","),this.basicForm.tags_en=this.tagsEnData.join(","),this.$loading({text:"Loading..."});let e=Object.assign({},this.basicForm);(0,E.$z)(e).then((e=>{console.log(e),200==e.code&&(this.$router.push("/deals/myDeals"),this.$loading().close())})).catch((e=>{console.log(e),e.msg&&this.$message.error(e.msg),e.message&&this.$message.error(e.message)}))}}))},resetForm(e){this.$refs[e].resetFields()},discard(){this.$router.go(-1)}}},B=a(8118);const G=(0,B.Z)(R,[["render",Y],["__scopeId","data-v-3b0440a6"]]);var X=G}}]);
//# sourceMappingURL=7515.14346c8a.js.map