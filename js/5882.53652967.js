"use strict";(self["webpackChunkeslweb"]=self["webpackChunkeslweb"]||[]).push([[5882],{4359:function(e,t,a){var o=a(6252);const l={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 16 16",width:"1.2em",height:"1.2em"},n=(0,o._)("g",{fill:"currentColor"},[(0,o._)("path",{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"}),(0,o._)("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"})],-1),i=[n];function s(e,t){return(0,o.wg)(),(0,o.iD)("svg",l,i)}t["Z"]={name:"bi-plus-square",render:s}},3434:function(e,t,a){a.r(t),a.d(t,{default:function(){return te}});var o=a(261),l=a(4359),n=a(7876),i=a(6252),s=a(6612);const r=e=>((0,i.dD)("data-v-3cbf09cd"),e=e(),(0,i.Cn)(),e),c={class:"bg"},d={class:"profile-container"},m={class:"profile-l-container"},u={class:"profile-r-container"},p={class:"profile-r-bg-container"},g={class:"new-deal-t"},h=r((()=>(0,i._)("div",{class:"new-deal-t-l"},"New event",-1))),_={class:"new-deal-t-r"},y=(0,i.Uk)(" DISCARD "),v=(0,i.Uk)(" PUBLISH "),b={class:"event-item-container"},f=r((()=>(0,i._)("div",{class:"event-item-label"}," 1. Basic information ",-1))),w={class:"event-item-c"},C={class:"event-type-container"},L={class:"deals-location-select-container"},V={class:"map-container"},T=r((()=>(0,i._)("div",{id:"mapContainer",class:"basemap"},null,-1))),F=[T],k={class:"event-item-container"},W=r((()=>(0,i._)("div",{class:"event-item-label"}," 2. About your event ",-1))),D={class:"event-item-c"},S={class:"event-date-container"},U={class:"event-date"},P={class:"event-time"},O={class:"event-time-item"},j={class:"event-time-item"},M={class:"account-xll-images"},N={class:"account-xll-image"},I={key:0},q={class:"account-xll-image-mask"},E={class:"account-xll-images"},x={class:"account-xll-image"},z={key:0},H={class:"account-xll-image-mask"};function A(e,t,a,r,T,A){const $=n.Z,Y=(0,i.up)("el-button"),J=(0,i.up)("el-form-item"),Q=(0,i.up)("el-col"),R=(0,i.up)("el-input"),B=(0,i.up)("el-option"),Z=(0,i.up)("el-select"),K=(0,i.up)("el-row"),G=(0,i.up)("el-date-picker"),X=(0,i.up)("el-time-select"),ee=l.Z,te=(0,i.up)("el-icon"),ae=(0,i.up)("el-upload"),oe=(0,i.up)("el-image"),le=(0,i.up)("zoom-in"),ne=(0,i.up)("el-dialog"),ie=(0,i.up)("el-form"),se=(0,i.up)("el-scrollbar"),re=o.Z,ce=(0,i.Q2)("loading");return(0,i.wg)(),(0,i.iD)("div",c,[(0,i._)("div",d,[(0,i._)("div",m,[(0,i.Wm)($)]),(0,i._)("div",u,[(0,i._)("div",p,[(0,i._)("div",g,[h,(0,i._)("div",_,[(0,i.Wm)(Y,{class:"new-deal-btn",link:"",round:"",onClick:t[0]||(t[0]=e=>A.discard())},{default:(0,i.w5)((()=>[y])),_:1}),(0,i.Wm)(Y,{class:"new-deal-btn",type:"primary",round:"",loading:T.submitLoadingValue,onClick:t[1]||(t[1]=e=>A.submitForm("basicForm"))},{default:(0,i.w5)((()=>[v])),_:1},8,["loading"])])]),(0,i.Wm)(se,{class:"basic-form"},{default:(0,i.w5)((()=>[(0,i.Wm)(ie,{ref:"basicForm",model:T.basicForm,rules:T.basicRules,"label-width":"120px","label-position":"top",class:"demo-ruleForm"},{default:(0,i.w5)((()=>[(0,i._)("div",b,[f,(0,i._)("div",w,[(0,i.Wm)(K,{gutter:50},{default:(0,i.w5)((()=>[(0,i.Wm)(Q,{span:6},{default:(0,i.w5)((()=>[(0,i.Wm)(J,{label:"Event Type"},{default:(0,i.w5)((()=>[(0,i._)("div",C,[(0,i._)("div",{class:(0,s.C_)(["event-type",1===T.dealLocationTypeValue?"event-type-active":""]),onClick:t[2]||(t[2]=e=>A.dealLocationTypeChange(1))}," ONLINE ",2),(0,i._)("div",{class:(0,s.C_)(["event-type",2===T.dealLocationTypeValue?"event-type-active":""]),onClick:t[3]||(t[3]=e=>A.dealLocationTypeChange(2))}," OFFLINE ",2),(0,i._)("div",{class:(0,s.C_)(["event-type",3===T.dealLocationTypeValue?"event-type-active":""]),onClick:t[4]||(t[4]=e=>A.dealLocationTypeChange(3))}," BOTH ",2)])])),_:1})])),_:1}),(0,i.Wm)(Q,{span:6},{default:(0,i.w5)((()=>[2===T.dealLocationTypeValue||3===T.dealLocationTypeValue?((0,i.wg)(),(0,i.j4)(J,{key:0,label:"Venue",prop:"event_place"},{default:(0,i.w5)((()=>[(0,i.Wm)(R,{modelValue:T.basicForm.event_place,"onUpdate:modelValue":t[5]||(t[5]=e=>T.basicForm.event_place=e),type:"text",placeholder:"eg. Mercedes-Benz Arena"},null,8,["modelValue"])])),_:1})):(0,i.kq)("",!0),1===T.dealLocationTypeValue||3===T.dealLocationTypeValue?((0,i.wg)(),(0,i.j4)(J,{key:1,label:"Event Link"},{default:(0,i.w5)((()=>[(0,i.Wm)(R,{modelValue:T.basicForm.online_url,"onUpdate:modelValue":t[6]||(t[6]=e=>T.basicForm.online_url=e),placeholder:"eg. eventlink.com"},null,8,["modelValue"])])),_:1})):(0,i.kq)("",!0)])),_:1}),2===T.dealLocationTypeValue||3===T.dealLocationTypeValue?((0,i.wg)(),(0,i.j4)(Q,{key:0,span:6},{default:(0,i.w5)((()=>[(0,i.Wm)(J,{label:"Location"},{default:(0,i.w5)((()=>[(0,i._)("div",L,[(0,i.Wm)(Z,{modelValue:T.countryObj,"onUpdate:modelValue":t[7]||(t[7]=e=>T.countryObj=e),onChange:A.countryChange,"value-key":"id",filterable:"",placeholder:"Select country"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(T.countryOptions,((e,t)=>((0,i.wg)(),(0,i.j4)(B,{key:t,label:e.name,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),T.provinceOptions.length>0?((0,i.wg)(),(0,i.j4)(Z,{key:0,modelValue:T.provinceObj,"onUpdate:modelValue":t[8]||(t[8]=e=>T.provinceObj=e),"value-key":"id",filterable:"",onChange:A.provinceChange,placeholder:"Select state/province"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(T.provinceOptions,((e,t)=>((0,i.wg)(),(0,i.j4)(B,{key:t,label:e.name,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])):(0,i.kq)("",!0),T.cityOptions.length>0?((0,i.wg)(),(0,i.j4)(Z,{key:1,modelValue:T.cityObj,"onUpdate:modelValue":t[9]||(t[9]=e=>T.cityObj=e),"value-key":"id",filterable:"",onChange:A.cityChange,placeholder:"Select city"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(T.cityOptions,((e,t)=>((0,i.wg)(),(0,i.j4)(B,{key:t,label:e.name,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])):(0,i.kq)("",!0)]),(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",V,F)),[[ce,T.mapLoading]])])),_:1})])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(Q,{span:6},{default:(0,i.w5)((()=>[(0,i.Wm)(J,{label:"Category",prop:"category_id"},{default:(0,i.w5)((()=>[(0,i.Wm)(Z,{modelValue:T.basicForm.category_id,"onUpdate:modelValue":t[10]||(t[10]=e=>T.basicForm.category_id=e),placeholder:"Select category"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(T.categoryData,(e=>((0,i.wg)(),(0,i.j4)(B,{key:e.id,label:e.name_en,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})])]),(0,i._)("div",k,[W,(0,i._)("div",D,[(0,i.Wm)(K,{gutter:50},{default:(0,i.w5)((()=>[(0,i.Wm)(Q,{span:6},{default:(0,i.w5)((()=>[(0,i.Wm)(J,{label:"Event name",prop:"name"},{default:(0,i.w5)((()=>[(0,i.Wm)(R,{modelValue:T.basicForm.name,"onUpdate:modelValue":t[11]||(t[11]=e=>T.basicForm.name=e),placeholder:"Name of the event"},null,8,["modelValue"])])),_:1})])),_:1}),(0,i.Wm)(Q,{span:12},{default:(0,i.w5)((()=>[(0,i.Wm)(J,{label:"Event description",prop:"desc"},{default:(0,i.w5)((()=>[(0,i.Wm)(R,{modelValue:T.basicForm.desc,"onUpdate:modelValue":t[12]||(t[12]=e=>T.basicForm.desc=e),type:"textarea",placeholder:"Provide a paragraph or two about the event"},null,8,["modelValue"])])),_:1})])),_:1}),(0,i.Wm)(Q,{span:6},{default:(0,i.w5)((()=>[(0,i.Wm)(J,{label:"Event Date",required:"",prop:"date"},{default:(0,i.w5)((()=>[(0,i._)("div",S,[(0,i._)("div",U,[(0,i.Wm)(G,{modelValue:T.basicForm.date,"onUpdate:modelValue":t[13]||(t[13]=e=>T.basicForm.date=e),onChange:A.eventDateChange,type:"date",disabledDate:r.eventDisabledDate,placeholder:"Day","value-format":"YYYY-MM-DD"},null,8,["modelValue","onChange","disabledDate"])]),(0,i._)("div",P,[(0,i._)("div",O,[(0,i.Wm)(X,{onChange:A.startTimeChange,modelValue:T.startTime,"onUpdate:modelValue":t[14]||(t[14]=e=>T.startTime=e),"max-time":T.endTime,placeholder:"Start time",start:"00:00",step:"00:01",end:"23:59"},null,8,["onChange","modelValue","max-time"])]),(0,i._)("div",j,[(0,i.Wm)(X,{onChange:A.endTimeChange,modelValue:T.endTime,"onUpdate:modelValue":t[15]||(t[15]=e=>T.endTime=e),"min-time":T.startTime,placeholder:"End time",start:"00:00",step:"00:01",end:"23:59"},null,8,["onChange","modelValue","min-time"])])])])])),_:1})])),_:1})])),_:1}),(0,i.Wm)(K,{gutter:50},{default:(0,i.w5)((()=>[(0,i.Wm)(Q,{span:6},{default:(0,i.w5)((()=>[(0,i.Wm)(J,{label:"ESL Passport Members Get",prop:"type_desc"},{default:(0,i.w5)((()=>[(0,i.Wm)(R,{modelValue:T.basicForm.type_desc,"onUpdate:modelValue":t[16]||(t[16]=e=>T.basicForm.type_desc=e),type:"textarea",placeholder:"Enter the deal/discount you will offer our members."},null,8,["modelValue"])])),_:1})])),_:1}),(0,i.Wm)(Q,{span:6},{default:(0,i.w5)((()=>[(0,i.Wm)(J,{label:"Price",prop:"pay_money"},{default:(0,i.w5)((()=>[(0,i.Wm)(K,{gutter:10},{default:(0,i.w5)((()=>[(0,i.Wm)(Q,{span:8},{default:(0,i.w5)((()=>[(0,i.Wm)(Z,{modelValue:T.basicForm.currency,"onUpdate:modelValue":t[17]||(t[17]=e=>T.basicForm.currency=e),placeholder:"currency"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(T.currencyList,((e,t)=>((0,i.wg)(),(0,i.j4)(B,{key:t,label:e.object_en,value:e.object_en},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,i.Wm)(Q,{span:16},{default:(0,i.w5)((()=>[(0,i.Wm)(R,{modelValue:T.basicForm.pay_money,"onUpdate:modelValue":t[18]||(t[18]=e=>T.basicForm.pay_money=e),placeholder:"amount per ticket"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,i.Wm)(Q,{span:6},{default:(0,i.w5)((()=>[(0,i.Wm)(J,{label:"Company name",prop:"third_company_name"},{default:(0,i.w5)((()=>[(0,i.Wm)(R,{modelValue:T.basicForm.third_company_name,"onUpdate:modelValue":t[19]||(t[19]=e=>T.basicForm.third_company_name=e),type:"text",placeholder:"Company name"},null,8,["modelValue"])])),_:1})])),_:1}),(0,i.Wm)(Q,{span:6},{default:(0,i.w5)((()=>[(0,i.Wm)(J,{label:"Tags"},{default:(0,i.w5)((()=>[(0,i.Wm)(Z,{modelValue:T.selectTagsValue,"onUpdate:modelValue":t[20]||(t[20]=e=>T.selectTagsValue=e),multiple:"","collapse-tags":"","collapse-tags-tooltip":"",placeholder:"Select",filterable:"","allow-create":"","value-key":"id"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(T.tagsData,((e,t)=>((0,i.wg)(),(0,i.j4)(B,{key:t,label:e.name_en,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,i.Wm)(K,{gutter:50},{default:(0,i.w5)((()=>[(0,i.Wm)(Q,{span:6},{default:(0,i.w5)((()=>[(0,i.Wm)(J,{label:"Poster(2:3 ratio)",prop:"file"},{default:(0,i.w5)((()=>[(0,i.Wm)(ae,{class:"profile-uploader",action:"",headers:T.uploadHeaders,"show-file-list":!1,"http-request":A.flyerHttpRequest,"before-upload":A.beforeFlyerPhotoUpload},{default:(0,i.w5)((()=>[(0,i.Wm)(te,{size:45},{default:(0,i.w5)((()=>[(0,i.Wm)(ee)])),_:1})])),_:1},8,["headers","http-request","before-upload"]),(0,i._)("div",M,[(0,i._)("div",N,[T.flyerPhotoUrl?((0,i.wg)(),(0,i.iD)("div",I,[(0,i.Wm)(oe,{style:{width:"100%"},src:T.flyerPhotoUrl},null,8,["src"])])):(0,i.kq)("",!0),(0,i._)("div",q,[(0,i._)("span",{onClick:t[21]||(t[21]=e=>A.handleSingleImagePreview(T.flyerPhotoUrl))},[(0,i.Wm)(te,{color:"#ffffff",size:45},{default:(0,i.w5)((()=>[(0,i.Wm)(le)])),_:1})])])])]),(0,i.Wm)(ne,{width:"50%",modelValue:T.dialogSingleImageVisible,"onUpdate:modelValue":t[22]||(t[22]=e=>T.dialogSingleImageVisible=e),center:""},{default:(0,i.w5)((()=>[(0,i.Wm)(oe,{src:T.dialogSingleImageUrl},null,8,["src"])])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,i.Wm)(Q,{span:6},{default:(0,i.w5)((()=>[(0,i.Wm)(J,{label:"Company Logo",prop:"third_company_logo"},{default:(0,i.w5)((()=>[(0,i.Wm)(ae,{class:"profile-uploader",action:"",headers:T.uploadHeaders,"show-file-list":!1,"http-request":A.companyLogoHttpRequest,"before-upload":A.beforeCompanyLogoPhotoUpload},{default:(0,i.w5)((()=>[(0,i.Wm)(te,{size:45},{default:(0,i.w5)((()=>[(0,i.Wm)(ee)])),_:1})])),_:1},8,["headers","http-request","before-upload"]),(0,i._)("div",E,[(0,i._)("div",x,[T.companyLogoPhotoUrl?((0,i.wg)(),(0,i.iD)("div",z,[(0,i.Wm)(oe,{style:{width:"100%"},src:T.companyLogoPhotoUrl},null,8,["src"])])):(0,i.kq)("",!0),(0,i._)("div",H,[(0,i._)("span",{onClick:t[23]||(t[23]=e=>A.handleSingleImagePreview(T.companyLogoPhotoUrl))},[(0,i.Wm)(te,{color:"#ffffff",size:45},{default:(0,i.w5)((()=>[(0,i.Wm)(le)])),_:1})])])])])])),_:1})])),_:1})])),_:1})])])])),_:1},8,["model","rules"])])),_:1})])])]),(0,i.Wm)(re,{show:T.uploadLoadingStatus,onOnCancel:t[24]||(t[24]=e=>A.cancelUpload())},null,8,["show"])])}a(1703);var $=a(1836),Y=a(6158),J=a.n(Y),Q=a(8847),R=a.n(Q),B=a(8005),Z=a.n(B),K=a(4276),G={name:"post",components:{meSideMenu:n.Z,xllLoading:o.Z},setup(){const e=e=>{let t=new Date,a=t.getFullYear(),o=t.getMonth()+1,l=t.getDate(),n=a+"-"+o+"-"+l,i=new Date(n);return e.getTime()<i.getTime()};return{eventDisabledDate:e}},data(){const e=(e,t,a)=>(console.log(t),t?this.startTime?this.endTime?void a():a(new Error("Please select end time")):a(new Error("Please select start time")):a(new Error("Please select date")));return{dialogSingleImageVisible:!1,dialogSingleImageUrl:"",currencyList:[],addCurrencyStatus:!1,ownCurrencyValue:"",ownCurrencyList:[],selectCurrencyList:[],selectCurrencyArr:[],uploadLoadingStatus:!1,mapLoading:!1,map1Loading:!1,uploadActionUrl:"https://api.edupassport.io/api/user/uploadImg",uploadHeaders:{platform:4},uploadData:{token:localStorage.getItem("token")},flyerPhotoUrl:"",companyLogoPhotoUrl:"",accessToken:"pk.eyJ1Ijoic3JrbGluZ2UiLCJhIjoiY2t2NnR4anI2OWU5NDJ3bWE1dHd3c3h1aSJ9.O0JfjqiyBBkFuf4G-DQ-DQ",mapStyle:"mapbox://styles/mapbox/streets-v11",dealLocationTypeValue:1,userInfo:{},basicUserInfo:{},sLocationType:1,countryObj:{},provinceObj:{},cityObj:{},countryName:"",countryNameCn:"",provinceName:"",provinceNameCn:"",cityName:"",cityNameCn:"",countryOptions:[],provinceOptions:[],cityOptions:[],startTime:"",endTime:"",eventDate:"",basicForm:{token:localStorage.getItem("token"),user_id:localStorage.getItem("uid"),name:void 0,desc:void 0,third_company_logo:void 0,third_company_name:void 0,type_desc:void 0,pay_money:void 0,date:void 0,file:void 0,file_name:void 0,is_all:"1",event_place:void 0,start_time:void 0,end_time:void 0,is_online:1,online_url:void 0,location:void 0,country_id:void 0,state_id:void 0,town_id:void 0,lat:void 0,lng:void 0,category_id:void 0,currency:"USD",tag:[],tags_cn:"",tags_en:""},basicRules:{name:[{required:!0,message:"Please input",trigger:"blur"}],desc:[{required:!0,message:"Please input",trigger:"blur"}],date:[{required:!0,validator:e,trigger:"blur"}],file:[{required:!0,message:"Please upload",trigger:"blur"}],third_company_logo:[{required:!1,message:"Please upload",trigger:"blur"}],third_company_name:[{required:!1,message:"Please input",trigger:"blur"}]},categoryData:[],tagsData:[],addTagsStatus:!1,ownTagsValue:"",ownTagsList:[],selectTagsList:[],selectTagsArr:[],tagsCnData:[],tagsEnData:[],submitLoadingValue:!1,selectTagsValue:[]}},mounted(){let e=this.$route.query.str;if(e){let t=JSON.parse((0,K.Jx)(e));console.log(t),this.basicForm=Object.assign({},t),this.basicForm.event_id=t.id,this.flyerPhotoUrl=t.file,this.companyLogoPhotoUrl=t.third_company_logo}this.getAllCountry(),this.getUserObjectList(),this.getEventCategories(),this.getEventsTags()},methods:{handleSingleImagePreview(e){this.dialogSingleImageUrl=e,this.dialogSingleImageVisible=!0},companyLogoHttpRequest(e){let t=this;new(Z())(e.file,{quality:.6,success(e){const a=new FormData;a.append("token",localStorage.getItem("token"));let o="no";"yes"===o&&(a.append("file[]",e,e.name),(0,$._p)(a).then((e=>{if(200==e.code){let a=e.data[0]["file_url"];t.uploadLoadingStatus=!1,t.companyLogoPhotoUrl=a,t.basicForm.third_company_logo=a}})).catch((e=>{console.log(e)}))),"no"===o&&(a.append("file",e,e.name),(0,$.Qz)(a).then((e=>{if(200==e.code){let a=e.message.file_path;t.uploadLoadingStatus=!1,t.companyLogoPhotoUrl=a,t.basicForm.third_company_logo=a}})).catch((e=>{console.log(e)})))},error(e){console.log(e.message)}})},flyerHttpRequest(e){let t=this;new(Z())(e.file,{quality:.6,success(e){const a=new FormData;a.append("token",localStorage.getItem("token"));let o="no";"yes"===o&&(a.append("file[]",e,e.name),(0,$._p)(a).then((e=>{if(200==e.code){let a=e.data[0]["file_url"];t.uploadLoadingStatus=!1,t.flyerPhotoUrl=a,t.basicForm.file=a}})).catch((e=>{console.log(e)}))),"no"===o&&(a.append("file",e,e.name),(0,$.Qz)(a).then((e=>{if(200==e.code){let a=e.message.file_path;t.uploadLoadingStatus=!1,t.flyerPhotoUrl=a,t.basicForm.file=a}})).catch((e=>{console.log(e)})))},error(e){console.log(e.message)}})},getEventsTags(){let e={page:1,limit:1e4,type:2};(0,$.SL)(e).then((e=>{console.log(e),200==e.code&&(this.tagsData=e.message.data)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},getEventCategories(){let e={page:1,limit:1e4};(0,$.Qf)(e).then((e=>{this.categoryData=e.message.data})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},dealLocationTypeChange(e){let t=this;this.dealLocationTypeValue=e,t.basicForm.is_online=e,2===e&&(this.mapLoading=!0,setTimeout((function(){t.initMap(),t.mapLoading=!1}),1e3)),3===e&&(this.map1Loading=!0,setTimeout((function(){t.initMap(),t.map1Loading=!1}),1e3))},beforeFlyerPhotoUpload(e){this.uploadLoadingStatus=!0;const t=e.size/1024/1024<20;return t||this.$message.error("Avatar picture size can not exceed 20MB"),t},beforeCompanyLogoPhotoUpload(e){this.uploadLoadingStatus=!0;const t=e.size/1024/1024<20;return t||this.$message.error("Avatar picture size can not exceed 20MB"),t},cancelUpload(){this.uploadLoadingStatus=!1},eventDateChange(e){this.eventDate=e},startTimeChange(e){console.log(e),this.startTime=e;let t=e+":00";console.log(t);let a=this.eventDate+" "+t;console.log(a)},endTimeChange(e){console.log(e),this.endTime=e},initMap(){J().accessToken=this.accessToken;const e=new(J().Map)({container:"mapContainer",center:[121.472644,31.231706],style:this.mapStyle,zoom:12}),t=new(J().NavigationControl);e.addControl(t,"top-right");const a=new(J().GeolocateControl)({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0});e.addControl(a,"top-right");const o=new(R())({accessToken:this.accessToken,mapboxgl:J()});e.addControl(o,"top-left");const l=new(J().Marker);o.on("result",(t=>{console.log(t),l.setLngLat(t.result.center).addTo(e),this.basicForm.location=t.result.place_name,this.basicForm.lng=t.result.center[0],this.basicForm.lat=t.result.center[1]})),o.on("clear",(e=>{console.log(e),this.basicForm.location="",this.basicForm.lng="",this.basicForm.lat=""}))},initMap1(){J().accessToken=this.accessToken;const e=new(J().Map)({container:"mapContainer1",center:[121.472644,31.231706],style:this.mapStyle,zoom:12}),t=new(J().NavigationControl);e.addControl(t,"top-right");const a=new(J().GeolocateControl)({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0});e.addControl(a,"top-right");const o=new(R())({accessToken:this.accessToken,mapboxgl:J()});e.addControl(o,"top-left");const l=new(J().Marker);o.on("result",(t=>{console.log(t),l.setLngLat(t.result.center).addTo(e),this.basicForm.location=t.result.place_name,this.basicForm.lng=t.result.center[0],this.basicForm.lat=t.result.center[1]})),o.on("clear",(e=>{console.log(e),this.basicForm.location="",this.basicForm.lng="",this.basicForm.lat=""}))},getAllCountry(){let e={};(0,$.PQ)(e).then((e=>{console.log(e),200==e.code&&(this.countryOptions=e.message)})).catch((e=>{this.$message.error(e.msg)}))},getAllProvinces(e){let t={country_id:e};(0,$.PQ)(t).then((e=>{console.log(e),200==e.code&&(this.provinceOptions=e.message)})).catch((e=>{this.$message.error(e.msg)}))},getAllCitys(e,t){let a={country_id:e,state_id:t};(0,$.PQ)(a).then((e=>{console.log(e),200==e.code&&(this.cityOptions=e.message)})).catch((e=>{this.$message.error(e.msg)}))},countryChange(e){console.log(e),this.basicForm.state_id=void 0,this.basicForm.town_id=void 0,this.provinceOptions=[],this.cityOptions=[],this.basicForm.country_id=e.id,this.countryName=e.name,this.countryNameCn=e.name,this.getAllProvinces(e.id)},provinceChange(e){console.log(e),this.basicForm.town_id=void 0,this.cityOptions=[],this.basicForm.state_id=e.id,this.provinceName=e.name,this.provinceNameCn=e.name,this.getAllCitys(this.basicForm.country_id,e.id)},cityChange(e){console.log(e),this.basicForm.town_id=e.id,this.cityName=e.name,this.cityNameCn=e.name},getUserObjectList(){let e={token:localStorage.getItem("token")};(0,$.hF)(e).then((e=>{200==e.code&&(this.currencyList=e.message.filter((e=>117===e.pid)))})).catch((e=>{console.log(e),e.msg&&this.$message.error(e.msg),e.message&&this.$message.error(e.message)}))},discard(){this.$router.go(-1)},submitForm(e){this.$refs[e].validate((e=>{if(!e)return console.log("error submit!!"),!1;{let e=this.selectTagsValue,t=[],a=[],o=[];e.length>0&&e.forEach((e=>{"string"===typeof e&&(console.log("string"),o.push(e),a.push(e)),"object"===typeof e&&(console.log("object"),t.push(e.id),o.push(e.name_cn),a.push(e.name_en))})),this.basicForm.tag=t,this.basicForm.tags_cn=o.join(","),this.basicForm.tags_en=a.join(","),this.eventDate&&(this.basicForm.date=this.eventDate),this.eventDate&&this.startTime&&(this.basicForm.start_time=this.eventDate+" "+this.startTime+":00"),this.eventDate&&this.endTime&&(this.basicForm.end_time=this.eventDate+" "+this.endTime+":00");let l={country_name_en:this.countryName,country_name_cn:this.countryNameCn,province_name_en:this.provinceName,province_name_cn:this.provinceNameCn,city_name_en:this.cityName,city_name_cn:this.cityNameCn};this.basicForm.country_info=JSON.stringify(l),this.$loading({text:"Loading..."});let n=Object.assign({},this.basicForm);(0,$.QY)(n).then((e=>{console.log(e),200==e.code&&(this.$loading().close(),this.$router.push("/events/myEvents"))})).catch((e=>{console.log(e),this.$message.error(e.msg),this.$loading().close()}))}}))},async submitEventForm(){let e=Object.assign({},this.basicForm),t=this.eventDate+" "+this.startTime+":00",a=this.eventDate+" "+this.endTime+":00",o=new Date(t),l=o.getHours(),n=o.getMinutes(),i=l>=12?"PM":"AM";l%=12,l=l||12,l=l.toString().padStart(2,"0"),n=n.toString().padStart(2,"0");let s=new Date(a),r=s.getHours(),c=s.getMinutes(),d=r>=12?"PM":"AM";r%=12,r=r||12,r=r.toString().padStart(2,"0"),c=c.toString().padStart(2,"0");let m=[{zf_referrer_name:""},{zf_redirect_url:""},{zc_gad:""},{SingleLine:e.name},{Dropdown2:e.category_id},{SingleLine1:e.pay_money},{SingleLine3:""},{SingleLine4:""},{Dropdown:e.tags_en},{Date:this.eventDate},{Time_hours:l},{Time_minutes:n},{Time_meridiem:i},{Time1_hours:r},{Time1_minutes:c},{Time1_meridiem:d},{Email:localStorage.getItem("email")},{SingleLine6:e.event_place},{SingleLine7:e.location},{Website:e.file},{Dropdown1:""},{MultiLine:e.desc},{MultiLine1:e.type_desc}],u={zoho_data:m,zoho_url:"https://forms.zohopublic.com/edupassport/form/PostEventform/formperma/Far3vsluPJX_E1n27v0883C-insXpT_m6rJsJz-L5r8/htmlRecords/submit"};await(0,$.Qi)(u).then((e=>{console.log(e)})).catch((e=>{console.log(e)}))}}},X=a(8118);const ee=(0,X.Z)(G,[["render",A],["__scopeId","data-v-3cbf09cd"]]);var te=ee}}]);
//# sourceMappingURL=5882.53652967.js.map