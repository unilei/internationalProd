"use strict";(self["webpackChunkeslweb"]=self["webpackChunkeslweb"]||[]).push([[948],{2418:function(e,t,i){i.d(t,{Z:function(){return b}});var a=i(6252);const o=e=>((0,a.dD)("data-v-71ae169c"),e=e(),(0,a.Cn)(),e),n={key:0,class:"title-container"},s={key:0},l={key:1},r={key:2},c={key:3},m={key:4},u=(0,a.Uk)(" Profile "),d=o((()=>(0,a._)("h4",null,"Please confirm and complete the fields ",-1)));function h(e,t,i,o,h,p){return"add"==i.action?((0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("h3",null,[1==i.i?((0,a.wg)(),(0,a.iD)("span",s,"Educator")):(0,a.kq)("",!0),2==i.i?((0,a.wg)(),(0,a.iD)("span",l,"Recruiter")):(0,a.kq)("",!0),3==i.i?((0,a.wg)(),(0,a.iD)("span",r,"School")):(0,a.kq)("",!0),4==i.i?((0,a.wg)(),(0,a.iD)("span",c,"Other")):(0,a.kq)("",!0),5==i.i?((0,a.wg)(),(0,a.iD)("span",m,"Vendor")):(0,a.kq)("",!0),u]),d])):(0,a.kq)("",!0)}var p={name:"profileTitle",props:["i","action"]},g=i(8118);const _=(0,g.Z)(p,[["render",h],["__scopeId","data-v-71ae169c"]]);var b=_},9168:function(e,t,i){i.r(t),i.d(t,{default:function(){return M}});var a=i(261),o=i(7876),n=i(2418),s=i(6252),l=i(6612);const r={class:"bg"},c={class:"basic-container"},m={class:"basic-breadcrumb-container"},u=(0,s.Uk)("Home"),d=(0,s.Uk)("Your Personal Information"),h={class:"basic-form"},p={class:"contact-phone-container"},g={class:"contact-phone-l"},_={style:{float:"left"}},b={style:{float:"right",color:"var(--el-text-color-secondary)","font-size":"13px"}},y={class:"contact-phone-r"},f=(0,s.Uk)(" Email (Caution: Changing this will affect your login details) "),v={key:1,class:"el-icon-plus avatar-uploader-icon"},w={class:"xll-location-container"},F={class:"xll-location-l"},C={class:"xll-location-r"},N=(0,s.Uk)(" Edit "),k=(0,s.Uk)(" Cancel "),S={class:"submit-btn-container"},L=(0,s.Uk)(" Submit ");function O(e,t,i,O,D,V){const j=n.Z,P=o.Z,U=(0,s.up)("el-col"),W=(0,s.up)("el-breadcrumb-item"),q=(0,s.up)("el-breadcrumb"),x=(0,s.up)("el-input"),z=(0,s.up)("el-form-item"),$=(0,s.up)("el-option"),I=(0,s.up)("el-select"),M=(0,s.up)("el-image"),Y=(0,s.up)("el-upload"),H=(0,s.up)("el-date-picker"),E=(0,s.up)("el-button"),Z=(0,s.up)("el-form"),A=a.Z,J=(0,s.up)("el-row");return(0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("div",c,[(0,s.Wm)(j,{i:D.i,action:D.action},null,8,["i","action"]),(0,s.Wm)(J,{align:"top",justify:"center"},{default:(0,s.w5)((()=>[D.sideMenuStatus?((0,s.wg)(),(0,s.j4)(U,{key:0,xs:24,sm:24,md:4,lg:4,xl:4},{default:(0,s.w5)((()=>[(0,s.Wm)(P)])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(U,{class:"basic-r-container",xs:24,sm:24,md:20,lg:20,xl:20},{default:(0,s.w5)((()=>[(0,s._)("div",m,[(0,s.Wm)(q,{separator:"/"},{default:(0,s.w5)((()=>[(0,s.Wm)(W,{to:{path:"/"}},{default:(0,s.w5)((()=>[u])),_:1}),(0,s.Wm)(W,null,{default:(0,s.w5)((()=>[d])),_:1})])),_:1})]),(0,s._)("div",h,[(0,s.Wm)(Z,{ref:"basicForms",model:O.basicForm,rules:O.basicRules,"label-width":"120px","label-position":"top",class:"demo-ruleForm"},{default:(0,s.w5)((()=>[(0,s.Wm)(z,{label:"First Name",prop:"first_name"},{default:(0,s.w5)((()=>[(0,s.Wm)(x,{modelValue:O.basicForm.first_name,"onUpdate:modelValue":t[0]||(t[0]=e=>O.basicForm.first_name=e),placeholder:"First Name"},null,8,["modelValue"])])),_:1}),(0,s.Wm)(z,{label:"Last Name",prop:"last_name"},{default:(0,s.w5)((()=>[(0,s.Wm)(x,{modelValue:O.basicForm.last_name,"onUpdate:modelValue":t[1]||(t[1]=e=>O.basicForm.last_name=e),placeholder:"Last Name"},null,8,["modelValue"])])),_:1}),(0,s.Wm)(z,{label:"Gender",prop:"sex"},{default:(0,s.w5)((()=>[(0,s.Wm)(I,{modelValue:O.basicForm.sex,"onUpdate:modelValue":t[2]||(t[2]=e=>O.basicForm.sex=e),placeholder:"Select your gender"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(D.sexOptions,((e,t)=>((0,s.wg)(),(0,s.j4)($,{key:t,label:e.object_en,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,s.Wm)(z,{label:"Phone #",prop:"phone"},{default:(0,s.w5)((()=>[(0,s._)("div",p,[(0,s._)("div",g,[(0,s.Wm)(I,{modelValue:O.basicForm.area_code,"onUpdate:modelValue":t[3]||(t[3]=e=>O.basicForm.area_code=e),filterable:"",class:"m-2",placeholder:"Select"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(D.phoneCodeData,(e=>((0,s.wg)(),(0,s.j4)($,{key:e.phone_code,label:e.en+" "+e.phone_code,value:e.phone_code},{default:(0,s.w5)((()=>[(0,s._)("span",_,(0,l.zw)(e.en),1),(0,s._)("span",b,(0,l.zw)(e.phone_code),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,s._)("div",y,[(0,s.Wm)(x,{modelValue:O.basicForm.phone,"onUpdate:modelValue":t[4]||(t[4]=e=>O.basicForm.phone=e),placeholder:"Phone #"},null,8,["modelValue"])])])])),_:1}),(0,s.Wm)(z,{label:"Email",prop:"email"},{label:(0,s.w5)((()=>[f])),default:(0,s.w5)((()=>[(0,s.Wm)(x,{modelValue:O.basicForm.email,"onUpdate:modelValue":t[5]||(t[5]=e=>O.basicForm.email=e),placeholder:"Email"},null,8,["modelValue"])])),_:1}),(0,s.Wm)(z,{label:"Profile Photo",prop:"headimgurl"},{default:(0,s.w5)((()=>[(0,s.Wm)(Y,{class:"profile-uploader",action:"",headers:D.uploadHeaders,"show-file-list":!1,"http-request":V.profilePhotoHttpRequest,"before-upload":V.beforeProfilePhotoUpload},{default:(0,s.w5)((()=>[D.profilePhotoUrl?((0,s.wg)(),(0,s.j4)(M,{key:0,src:D.profilePhotoUrl,class:"profile-avatar"},null,8,["src"])):((0,s.wg)(),(0,s.iD)("i",v))])),_:1},8,["headers","http-request","before-upload"])])),_:1}),(0,s.Wm)(z,{label:"Birthdate",prop:"birthday"},{default:(0,s.w5)((()=>[(0,s.Wm)(H,{modelValue:O.basicForm.birthday,"onUpdate:modelValue":t[6]||(t[6]=e=>O.basicForm.birthday=e),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",placeholder:"Pick a date",disabledDate:O.birthdayDisabledDate,style:{width:"100%"}},null,8,["modelValue","disabledDate"])])),_:1}),(0,s.Wm)(z,{label:"Location"},{default:(0,s.w5)((()=>[(0,s._)("div",w,[(0,s._)("div",F,[D.haveLocationStatus?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s.Uk)((0,l.zw)(e.$filters.countryInfoFormat(D.countryInfo)),1)],64)):((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[(0,s.Wm)(I,{modelValue:D.countryObj,"onUpdate:modelValue":t[7]||(t[7]=e=>D.countryObj=e),onChange:V.countryChange,"value-key":"id",filterable:"",placeholder:"Select Country"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(D.countryOptions,((e,t)=>((0,s.wg)(),(0,s.j4)($,{key:t,label:e.name,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),D.provinceOptions.length>0?((0,s.wg)(),(0,s.j4)(I,{key:0,modelValue:D.provinceObj,"onUpdate:modelValue":t[8]||(t[8]=e=>D.provinceObj=e),"value-key":"id",filterable:"",onChange:V.provinceChange,placeholder:"Select Province"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(D.provinceOptions,((e,t)=>((0,s.wg)(),(0,s.j4)($,{key:t,label:e.name,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])):(0,s.kq)("",!0),D.cityOptions.length>0?((0,s.wg)(),(0,s.j4)(I,{key:1,modelValue:D.cityObj,"onUpdate:modelValue":t[9]||(t[9]=e=>D.cityObj=e),"value-key":"id",filterable:"",onChange:V.cityChange,placeholder:"Select City"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(D.cityOptions,((e,t)=>((0,s.wg)(),(0,s.j4)($,{key:t,label:e.name,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])):(0,s.kq)("",!0)],64))]),(0,s._)("div",C,[D.haveLocationStatus?((0,s.wg)(),(0,s.j4)(E,{key:0,plain:"",round:"",onClick:t[10]||(t[10]=e=>V.changeEditLocation())},{default:(0,s.w5)((()=>[N])),_:1})):(0,s.kq)("",!0),D.showLocationCancelStatus?((0,s.wg)(),(0,s.j4)(E,{key:1,plain:"",round:"",onClick:t[11]||(t[11]=e=>V.changeCancelLocation())},{default:(0,s.w5)((()=>[k])),_:1})):(0,s.kq)("",!0)])])])),_:1})])),_:1},8,["model","rules"])]),(0,s._)("div",S,[(0,s.Wm)(E,{type:"primary",class:"submit-btn",loading:O.submitLoadingValue,onClick:t[12]||(t[12]=e=>V.submitForm("basicForms"))},{default:(0,s.w5)((()=>[L])),_:1},8,["loading"])]),(0,s.Wm)(A,{show:D.uploadLoadingStatus,onOnCancel:t[13]||(t[13]=e=>V.cancelUploadProfile())},null,8,["show"])])),_:1})])),_:1})])])}var D=i(894),V=i(7951),j=i(1836),P=i(3907),U=i(2931),W=i(4276),q=i(8005),x=i.n(q),z={name:"userContact",components:{meSideMenu:o.Z,profileTitle:n.Z,xllLoading:a.Z},setup(){const e=(0,P.oR)(),t=t=>{e.commit("identity",t)},i=(0,U.iH)(!1),a=(0,U.iH)(null),o=(0,U.qj)({first_name:"",last_name:"",username:"",identity:localStorage.getItem("identity"),sex:"",phone:"",email:"",state_id:"",town_id:"",country_id:"",country_info:"",headimgurl:"",language:2,birthday:"",area_code:"+86"}),n=(0,U.qj)({first_name:[{required:!0,message:"First Name",trigger:"blur"}],last_name:[{required:!0,message:"Last Name",trigger:"blur"}],sex:[{required:!0,message:"Select your gender",trigger:"change"}],email:[{required:!0,message:"Please enter your email",trigger:"change"}],headimgurl:[{required:!0,message:"Choose your avatar",trigger:"change"}]}),s=e=>{let t=new Date;return e.getTime()>=t.getTime()};return{setIdentity:t,submitLoadingValue:i,basicForm:o,basicForms:a,basicRules:n,birthdayDisabledDate:s}},computed:{identity:{get(){return this.$store.state.identity}}},data(){return{uploadLoadingStatus:!1,userContact:{},countryInfo:"",haveLocationStatus:!1,showLocationCancelStatus:!1,sideMenuStatus:!0,sexOptions:[{value:1,object_en:"Male",object_cn:"男"},{value:2,object_en:"Female",object_cn:"女"},{value:3,object_en:"Undisclosed",object_cn:"未公开"}],sLocationType:1,countryObj:{},provinceObj:{},cityObj:{},districtObj:{},countryName:"",countryNameCn:"",provinceName:"",provinceNameCn:"",cityName:"",cityNameCn:"",districtName:"",districtNameCn:"",countryOptions:[],provinceOptions:[],cityOptions:[],districtOptions:[],uploadActionUrl:"https://api.edupassport.io/api/user/uploadImg",uploadHeaders:{platform:4},uploadData:{token:localStorage.getItem("token")},profilePhotoUrl:"",logoPhotoUrl:"",nationalityOptions:V.i,phoneCodeData:D.o,i:0,action:""}},beforeRouteUpdate(e){console.log(e.query.s);let t=e.query.s;if(t){let e=JSON.parse((0,W.Jx)(t));console.log(e),this.i=e.i,this.action=e.action,"add"==e.action&&(this.sideMenuStatus=!1,this.getBasicInfo(e.i)),"edit"==e.action&&this.getBasicInfo(e.i)}},mounted(){let e=this.$route.query.s;if(e){let t=JSON.parse((0,W.Jx)(e));this.i=t.i,this.action=t.action,"add"==t.action&&(this.sideMenuStatus=!1,this.getBasicInfo(t.i)),"edit"==t.action&&this.getBasicInfo(t.i)}this.getAllCountry()},methods:{changeEditLocation(){this.haveLocationStatus=!1,this.showLocationCancelStatus=!0,this.countryName="",this.countryNameCn="",this.provinceName="",this.provinceNameCn="",this.cityName="",this.cityNameCn=""},changeCancelLocation(){this.haveLocationStatus=!0,this.showLocationCancelStatus=!1;let e=this.userContact;if(e.country_info){let t=JSON.parse(e.country_info);this.countryName=t.country_name_en,this.countryNameCn=t.country_name_cn,this.provinceName=t.province_name_en,this.provinceNameCn=t.province_name_cn,this.cityName=t.city_name_en,this.cityNameCn=t.city_name_cn,this.districtName=t.district_name_en,this.districtNameCn=t.district_name_cn,this.basicForm.country_info=e.country_info}},cancelUploadProfile(){this.uploadLoadingStatus=!1},getVisitorInfo(e,t){let i={user_id:e,identity:t};(0,j.Vd)(i).then((e=>{if(console.log(e),200==e.code){let t=e.message.user_contact;this.userContact=t,t&&(this.basicForm.first_name=t.first_name,this.basicForm.last_name=t.last_name,t.username&&(this.basicForm.username=t.username),t.email&&(this.basicForm.email=t.email),t.sex&&(this.basicForm.sex=t.sex),t.phone&&(this.basicForm.phone=t.phone),t.country_id&&(this.basicForm.country_id=t.country_id),t.state_id&&(this.basicForm.state_id=t.state_id),t.town_id&&(this.basicForm.town_id=t.town_id),t.headimgurl&&(this.basicForm.headimgurl=t.headimgurl,this.profilePhotoUrl=t.headimgurl),t.birthday&&"0000-00-00"!==t.birthday&&(this.basicForm.birthday=t.birthday),t.area_code&&(this.basicForm.area_code=t.area_code),t.country_info&&(this.basicForm.country_info=t.country_info))}})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},getBasicInfo(e){let t={identity:e};(0,j.Lk)(t).then((e=>{if(200==e.code){let t=e.message.user_contact;if(this.userContact=t,t&&(this.basicForm.first_name=t.first_name,this.basicForm.last_name=t.last_name,t.username&&(this.basicForm.username=t.username),t.email&&(this.basicForm.email=t.email),t.sex&&(this.basicForm.sex=t.sex),t.phone&&(this.basicForm.phone=t.phone),t.country_id&&(this.basicForm.country_id=t.country_id),t.state_id&&(this.basicForm.state_id=t.state_id),t.town_id&&(this.basicForm.town_id=t.town_id),t.headimgurl&&(this.basicForm.headimgurl=t.headimgurl,this.profilePhotoUrl=t.headimgurl),t.birthday&&"0000-00-00"!==t.birthday&&(this.basicForm.birthday=t.birthday),t.area_code&&(this.basicForm.area_code=t.area_code),t.country_info)){let e=JSON.parse(t.country_info);this.countryName=e.country_name_en,this.countryNameCn=e.country_name_cn,this.provinceName=e.province_name_en,this.provinceNameCn=e.province_name_cn,this.cityName=e.city_name_en,this.cityNameCn=e.city_name_cn,this.districtName=e.district_name_en,this.districtNameCn=e.district_name_cn,this.basicForm.country_info=t.country_info,this.countryInfo=t.country_info,this.haveLocationStatus=!0}}})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},profilePhotoHttpRequest(e){let t=this;new(x())(e.file,{quality:.6,success(e){const i=new FormData;i.append("token",localStorage.getItem("token"));let a="no";"yes"===a&&(i.append("file[]",e,e.name),(0,j._p)(i).then((e=>{if(200==e.code){let i=e.data[0]["file_url"];t.uploadLoadingStatus=!1,t.profilePhotoUrl=i,t.basicForm.headimgurl=i}})).catch((e=>{console.log(e)}))),"no"===a&&(i.append("file",e,e.name),(0,j.Qz)(i).then((e=>{if(200==e.code){let i=e.message.file_path;t.uploadLoadingStatus=!1,t.profilePhotoUrl=i,t.basicForm.headimgurl=i}})).catch((e=>{console.log(e)})))},error(e){console.log(e.message)}})},beforeProfilePhotoUpload(e){this.uploadLoadingStatus=!0;const t=e.size/1024/1024<20;return t||this.$message.error("Avatar picture size can not exceed 20MB"),t},submitForm(e){let t=this.i,i=this.action;this.submitLoadingValue=!0,this.$refs[e].validate((e=>{if(!e)return console.log("error submit!!"),this.submitLoadingValue=!1,!1;{let e={country_name_en:this.countryName,country_name_cn:this.countryNameCn,province_name_en:this.provinceName,province_name_cn:this.provinceNameCn,city_name_en:this.cityName,city_name_cn:this.cityNameCn};this.basicForm.country_info=JSON.stringify(e);let a=Object.assign({},this.basicForm);(0,j.b3)(a).then((e=>{if(200==e.code){if(1==t)if("edit"==i)this.$router.push("/overview?identity="+t);else{let e={i:t,action:"add"},i=(0,W.cv)(JSON.stringify(e));this.$router.push({path:"/educator/edit/basic",query:{s:i}})}if(2==t||3==t||4==t)if("edit"==i)this.$router.push("/overview?identity="+t);else{let e={i:t,action:"add"},i=(0,W.cv)(JSON.stringify(e));this.$router.push({path:"/profile/contact/company",query:{s:i}})}if(5==t)if("edit"==i)this.$router.push("/overview?identity="+t);else{let e={i:t,action:"add"},i=(0,W.cv)(JSON.stringify(e));this.$router.push({path:"/profile/contact/company",query:{s:i}})}}})).catch((e=>{console.log(e),this.$message.error(e.msg),this.submitLoadingValue=!1}))}}))},resetForm(e){this.$refs[e].resetFields()},getAllCountry(){let e={};(0,j.PQ)(e).then((e=>{console.log(e),200==e.code&&(this.countryOptions=e.message)})).catch((e=>{this.$message.error(e.msg)}))},getAllProvinces(e){let t={country_id:e};(0,j.PQ)(t).then((e=>{console.log(e),200==e.code&&(this.provinceOptions=e.message)})).catch((e=>{this.$message.error(e.msg)}))},getAllCitys(e,t){let i={country_id:e,state_id:t};(0,j.PQ)(i).then((e=>{console.log(e),200==e.code&&(this.cityOptions=e.message)})).catch((e=>{this.$message.error(e.msg)}))},countryChange(e){console.log(e),this.basicForm.state_id=void 0,this.basicForm.town_id=void 0,this.provinceOptions=[],this.cityOptions=[],this.basicForm.country_id=e.id,this.countryName=e.name,this.countryNameCn=e.name,this.getAllProvinces(e.id)},provinceChange(e){console.log(e),this.basicForm.town_id=void 0,this.cityOptions=[],this.basicForm.state_id=e.id,this.provinceName=e.name,this.provinceNameCn=e.name,this.getAllCitys(this.basicForm.country_id,e.id)},cityChange(e){console.log(e),this.basicForm.town_id=e.id,this.cityName=e.name,this.cityNameCn=e.name},async submitEducatorContactForm(e){let t=Object.assign({},this.basicForm),i="";1==t.sex&&(i="Male"),2==t.sex&&(i="Female"),3==t.sex&&(i="Undisclosed");let a=[{zf_referrer_name:""},{zf_redirect_url:""},{zc_gad:""},{SingleLine:e},{SingleLine1:t.first_name},{SingleLine2:t.last_name},{Dropdown:i},{Date:t.birthday},{SingleLine3:""},{Email:t.email},{PhoneNumber_countrycode:t.phone_code+" "+t.phone},{SingleLine4:""},{Dropdown1:""},{MultiLine:""},{Number:""},{SingleLine5:""},{SingleLine6:""},{SingleLine7:""},{Dropdown2:""},{MultiLine1:""},{MultiLine2:""},{Dropdown3:""},{MultiLine3:""},{MultiLine4:""},{Website:t.headimgurl},{Website1:""}],o={zoho_data:a,zoho_url:"https://forms.zohopublic.com/edupassport/form/EducatorContactForm/formperma/G014C7ko-MpOp3A2vp6NZlgxhPbGj2HDtbzlZEI6cks/htmlRecords/submit"};await(0,j.Qi)(o).then((e=>{console.log(e)})).catch((e=>{console.log(e),e.msg&&this.$message.error(e.msg),e.message&&this.$message.error(e.message)}))},async submitCompanyContactForm(e){let t=Object.assign({},this.basicForm),i=[{zf_referrer_name:""},{zf_redirect_url:""},{zc_gad:""},{SingleLine:e},{SingleLine1:t.first_name},{SingleLine2:t.last_name},{Dropdown:""},{Date:""},{SingleLine3:""},{Email:t.email},{PhoneNumber_countrycode:""},{SingleLine4:""},{Dropdown1:""},{Number:""},{SingleLine5:""},{SingleLine6:""},{SingleLine7:""},{Website:""}],a={zoho_data:i,zoho_url:"https://forms.zohopublic.com/edupassport/form/CompanyContactForm/formperma/ZYHWpHeaRP511w85Ljl47AYAS77L3z9qcqUw4Wv48io/htmlRecords/submit"};await(0,j.Qi)(a).then((e=>{console.log(e)})).catch((e=>{console.log(e)}))}}},$=i(8118);const I=(0,$.Z)(z,[["render",O],["__scopeId","data-v-5b575785"]]);var M=I}}]);
//# sourceMappingURL=948.677d0a8a.js.map