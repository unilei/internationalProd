"use strict";(self["webpackChunkeslweb"]=self["webpackChunkeslweb"]||[]).push([[4495],{9870:function(e,t,a){a.d(t,{Z:function(){return u}});var s=a(6252);const i={class:"xll-ads-c"},l={class:"xll-ads-l"},o={class:"image-ads-slot"},n={class:"xll-ads-r"},r=["innerHTML"];function d(e,t,a,d,c,g){const h=(0,s.up)("Picture"),u=(0,s.up)("el-icon"),m=(0,s.up)("el-image"),p=(0,s.up)("el-carousel-item"),D=(0,s.up)("el-carousel");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(D,{class:"xll-carousel",height:a.height,"indicator-position":"none"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.adsData,((e,t)=>((0,s.wg)(),(0,s.j4)(p,{class:"xll-ads-swiper-item",key:t,onClick:t=>g.turnAdsDetail(e.link)},{default:(0,s.w5)((()=>[(0,s._)("div",i,[(0,s._)("div",l,[(0,s.Wm)(m,{class:"xll-ads-l-img",fit:"cover",src:""!=e.user_url?e.user_url:e.url},{error:(0,s.w5)((()=>[(0,s._)("div",o,[(0,s.Wm)(u,{size:80,color:"#808080"},{default:(0,s.w5)((()=>[(0,s.Wm)(h)])),_:1})])])),_:2},1032,["src"])]),(0,s._)("div",n,[(0,s._)("div",{class:"xll-ads-r-bg",innerHTML:e.title},null,8,r)])])])),_:2},1032,["onClick"])))),128))])),_:1},8,["height"])])}var c={name:"adsComponent",props:["adsData","height"],methods:{turnAdsDetail(e){window.open(e,"_blank")}}},g=a(8118);const h=(0,g.Z)(c,[["render",d],["__scopeId","data-v-7a6c57d6"]]);var u=h},7690:function(e,t,a){a.r(t),a.d(t,{default:function(){return O}});var s=a(2047),i=a(4595),l=a(1842),o=a(9870),n=a(5813),r=a(8094),d=a(6252),c=a(6612);const g={class:"bg"},h={class:"xll-container"},u={key:0,class:"xll-ads-container"},m={class:"deals-bg-container"},p={class:"deals-container"},D={class:"deals-item"},f={class:"deals-item-bg"},_=["onClick"],y=["onClick"],w={class:"deals-item-c"},v={class:"deals-item-c-l"},b={class:"deals-item-c-r"},k=["onClick"],C=["onClick"],$={class:"deals-item-b"},L={class:"deals-item-b-l"},S={class:"deals-item-b-r"},I=(0,d.Uk)(" QUICK VIEW "),x=(0,d.Uk)(" DETAILS "),V={class:"deals-pagination"},W={key:1,class:"xll-ads-bottom-container"};function q(e,t,a,q,F,P){const T=r.Z,H=(0,d.up)("el-col"),z=n.Z,B=o.Z,Z=(0,d.up)("el-image"),A=l.Z,U=(0,d.up)("el-icon"),O=(0,d.up)("CollectionTag"),M=(0,d.up)("el-avatar"),N=(0,d.up)("el-button"),J=(0,d.up)("el-pagination"),R=(0,d.up)("el-empty"),j=(0,d.up)("el-scrollbar"),Y=(0,d.up)("el-row"),Q=i.Z,E=s.Z,G=(0,d.Q2)("loading");return(0,d.wy)(((0,d.wg)(),(0,d.iD)("div",g,[(0,d._)("div",h,[(0,d.Wm)(Y,{gutter:0,align:"top",justify:"center"},{default:(0,d.w5)((()=>[(0,d.Wm)(H,{xs:24,sm:24,md:4,lg:4,xl:4},{default:(0,d.w5)((()=>[(0,d.Wm)(T,{locationData:F.locationOptions,tagsData:F.tagsData,subCateData:F.subCateData,onSearch:P.confirmFilterSearch},null,8,["locationData","tagsData","subCateData","onSearch"])])),_:1}),(0,d.Wm)(H,{xs:24,sm:24,md:7,lg:7,xl:6},{default:(0,d.w5)((()=>[(0,d.Wm)(z,{adsData:F.adsDataMid,featuredData:F.featuredDealsData,onAddFavorite:P.addFavoriteFeatured,onCancelFavorite:P.cancelFavoriteFeatured,onViewProfile:P.viewProfile,onDetail:P.showDealDetailDialog,onDealDetail:P.turnDealDetail},null,8,["adsData","featuredData","onAddFavorite","onCancelFavorite","onViewProfile","onDetail","onDealDetail"])])),_:1}),(0,d.Wm)(H,{class:"deals-list-col",xs:24,sm:24,md:13,lg:13,xl:14},{default:(0,d.w5)((()=>[(0,d.Wm)(j,{class:"deals-list-scroll"},{default:(0,d.w5)((()=>[F.adsDataTop.length>0?((0,d.wg)(),(0,d.iD)("div",u,[(0,d.Wm)(B,{height:F.adsHeight,adsData:F.adsDataTop},null,8,["height","adsData"])])):(0,d.kq)("",!0),(0,d._)("div",m,[F.dealsListData.length>0?((0,d.wg)(),(0,d.iD)(d.HY,{key:0},[(0,d._)("div",p,[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(F.dealsListData,((e,t)=>((0,d.wg)(),(0,d.iD)("div",{class:"deals-item-container",key:t},[(0,d._)("div",D,[(0,d._)("div",f,[(0,d.Wm)(Z,{class:"deals-item-background-img",src:e.company_info.background_image?e.company_info.background_image:"",fit:"cover",onClick:t=>P.viewProfile(e.user_id,e.identity,e.company_id)},null,8,["src","onClick"]),e.is_favorite&&1==e.is_favorite?((0,d.wg)(),(0,d.iD)("div",{key:0,class:"deals-item-favorite",onClick:a=>P.cancelFavorite(2,e.id,t)},[(0,d.Wm)(U,{color:"#6650B3",size:25},{default:(0,d.w5)((()=>[(0,d.Wm)(A)])),_:1})],8,_)):((0,d.wg)(),(0,d.iD)("div",{key:1,class:"deals-item-favorite",onClick:a=>P.addFavorite(e.id,2,e.title,e.company_logo,t)},[(0,d.Wm)(U,{size:25},{default:(0,d.w5)((()=>[(0,d.Wm)(O)])),_:1})],8,y))]),(0,d._)("div",w,[(0,d._)("div",v,[(0,d.Wm)(M,{class:"deals-logo",src:e.company_logo,onClick:t=>P.viewProfile(e.user_id,e.identity,e.company_id)},null,8,["src","onClick"])]),(0,d._)("div",b,[(0,d._)("div",{class:"deals-item-c-r-1",onClick:t=>P.viewProfile(e.user_id,e.identity,e.company_id)},(0,c.zw)(e.company_info.company_name),9,k),(0,d._)("div",{class:"deals-item-c-r-2",onClick:t=>P.showDealDetailDialog(e)},(0,c.zw)(e.title),9,C)])]),(0,d._)("div",$,[(0,d._)("div",L,[e.company_info.category_name_en&&"0"!=e.company_info.category_name_en?((0,d.wg)(),(0,d.iD)(d.HY,{key:0},[(0,d.Uk)((0,c.zw)(e.company_info.category_name_en),1)],64)):((0,d.wg)(),(0,d.iD)(d.HY,{key:1},[],64))]),(0,d._)("div",S,[(0,d.Wm)(N,{link:"",onClick:t=>P.showDealDetailDialog(e)},{default:(0,d.w5)((()=>[I])),_:2},1032,["onClick"]),(0,d.Wm)(N,{link:"",onClick:t=>P.turnDealDetail(e.id)},{default:(0,d.w5)((()=>[x])),_:2},1032,["onClick"])])])])])))),128))]),(0,d._)("div",V,[(0,d.Wm)(J,{layout:"prev, pager, next","default-current-page":1,onSizeChange:P.dealPageSizeChange,onCurrentChange:P.dealPageChange,"current-page":F.dealPage,"page-size":F.dealLimit,total:F.dealTotalNum},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])],64)):((0,d.wg)(),(0,d.j4)(R,{key:1,description:"..."}))]),F.adsDataBottom.length>0?((0,d.wg)(),(0,d.iD)("div",W,[(0,d.Wm)(B,{height:F.adsHeight,adsData:F.adsDataBottom},null,8,["height","adsData"])])):(0,d.kq)("",!0)])),_:1})])),_:1})])),_:1}),(0,d.Wm)(Q,{info:F.dealDetailData,qrcodeValue:F.qrcodeValue,onClose:t[0]||(t[0]=e=>F.dealDetailDialogVisible=!1),onShare:P.shareDeal,onViewProfile:P.viewProfile,visible:F.dealDetailDialogVisible},null,8,["info","qrcodeValue","onShare","onViewProfile","visible"]),(0,d.Wm)(E,{visible:F.shareDialogVisible,title:F.shareInfo.title,description:F.shareInfo.desc,quote:F.shareInfo.desc,url:F.shareUrl,onClose:t[1]||(t[1]=e=>F.shareDialogVisible=!1)},null,8,["visible","title","description","quote","url"])])])),[[G,F.showLoadingStatus]])}var F=a(1836),P=a(4276),T=a(6158),H=a.n(T),z=a(8847),B=a.n(z),Z={name:"index",components:{dealDetailCard:i.Z,shareCard:s.Z,dealFilterComponent:r.Z,featuredDealsPromoted:n.Z,adsComponent:o.Z},setup(){const e=window.location.origin;return{locationUrl:e}},data(){return{subCateData:[],locationValue:"",locationOptions:[],tagValue:[],tagsData:[],dealsListData:[],dealPage:1,dealLimit:10,dealTotalNum:0,sCateId:0,showLoadingStatus:!0,adsHeight:"190px",adsDataTop:[],adsDataMid:[],adsDataBottom:[],featuredDealsData:[],dealDetailDialogVisible:!1,dealDetailData:{},qrcodeValue:"",webDomain:"https://www.edupassport.io",showDealDetailStatus:!1,filterIsOnlineValue:!1,detailData:{},accessToken:"pk.eyJ1Ijoic3JrbGluZ2UiLCJhIjoiY2t2NnR4anI2OWU5NDJ3bWE1dHd3c3h1aSJ9.O0JfjqiyBBkFuf4G-DQ-DQ",mapStyle:"mapbox://styles/mapbox/streets-v11",shareDialogVisible:!1,shareInfo:{},shareUrl:"",filterResultData:{},companyInfo:{}}},beforeRouteUpdate(e){console.log(e)},unmounted(){window.onresize=null},mounted(){let e=document.body.clientWidth,t=Math.floor(e);t>=992&&t<1200&&(this.adsHeight="120px"),t>=1200&&t<1920&&(this.adsHeight="140px"),t>=1920&&(this.adsHeight="190px"),window.onresize=()=>{t>=992&&t<1200&&(this.adsHeight="120px"),t>=1200&&t<1920&&(this.adsHeight="140px"),t>=1920&&(this.adsHeight="190px")};let a=this.$route.query.page;if(a){let e=Number(a);this.dealPage=Number(e),this.getDealsList(e,this.dealLimit)}else this.getDealsList(this.dealPage,this.dealLimit);this.getFeaturedDealsList(),this.getSubIdentityList(),this.getTagsList(),this.getDealsAreaList(),this.getAdsList()},methods:{confirmFilterSearch(e){console.log(e),this.filterResultData=e,this.getDealsList(this.dealPage,this.dealLimit)},backToSearchResults(){this.showDealDetailStatus=!1,this.getDealsList(this.dealPage,this.dealLimit),this.getFeaturedDealsList()},readMoreDeal(e){this.showDealDetailStatus=!0,this.dealDetailDialogVisible=!1,this.$router.push({path:"/deals",query:{id:e}})},showDealDetailDialog(e){this.dealDetailData=e,this.dealDetailDialogVisible=!0,this.qrcodeValue=this.webDomain+"?id="+e.id},shareDeal(e){this.shareDialogVisible=!0,this.shareInfo=e,this.shareUrl=this.locationUrl+"/deals/detail?id="+e.id},viewProfile(e,t,a){this.$router.push({path:"/deals/vendor/profile",query:{uid:e,i:t,cid:a}})},turnBanner(e){if(console.log(e),""!=e)window.location.href=e;else{let e=localStorage.getItem("token");if(!e)return void window.open("https://salesiq.zoho.com/signaturesupport.ls?widgetcode=75672d291fd9d5fcab53ffa3194f32598809c21f9b5284cbaf3493087cdd2e0d1a2010ab7b6727677d37b27582c0e9c4","_blank");this.$router.push("/me/ads/platform")}},getAdsList(){let e={page:1,limit:1e4};(0,F.tb)(e).then((e=>{if(200==e.code){let t=[],a=[],s=[],i=localStorage.getItem("identity");i||(t=e.message.filter((e=>"guest_d1"==e.name)),a=e.message.filter((e=>"guest_d2"==e.name)),s=e.message.filter((e=>"guest_d3"==e.name))),1==i&&(t=e.message.filter((e=>"educator_d1"==e.name)),a=e.message.filter((e=>"educator_d2"==e.name)),s=e.message.filter((e=>"educator_d3"==e.name))),2!=i&&3!=i&&4!=i||(t=e.message.filter((e=>"business_d1"==e.name)),a=e.message.filter((e=>"business_d2"==e.name)),s=e.message.filter((e=>"business_d3"==e.name))),5==i&&(t=e.message.filter((e=>"vendor_d1"==e.name)),a=e.message.filter((e=>"vendor_d2"==e.name)),s=e.message.filter((e=>"vendor_d3"==e.name))),t.length>0&&(this.adsDataTop=t[0].data),a.length>0&&(this.adsDataMid=a[0].data),s.length>0&&(this.adsDataBottom=s[0].data)}})).catch((e=>{this.$message.error(e.msg)}))},turnDealDetail(e){this.$router.push({path:"/deals/detail",query:{id:e}})},getSubIdentityList(){let e={pid:5,tree:1};(0,F.cF)(e).then((e=>{console.log(e),200==e.code&&(this.subCateData=e.message)})).catch((e=>{console.log(e),e.msg&&this.$message.error(e.msg),e.message&&this.$message.error(e.message)}))},getTagsList(){let e={page:1,limit:1e3};(0,F.g_)(e).then((e=>{console.log(e),200==e.code&&(this.tagsData=e.message.data)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},getDealsList(e,t){let a=this.filterResultData,s={page:e,limit:t},i=Object.assign(s,a);(0,F.BZ)(i).then((e=>{console.log(e),200==e.code&&(this.dealsListData=e.message.data,this.dealTotalNum=e.message.total,this.showLoadingStatus=!1)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},getDealsAreaList(){(0,F.DP)({}).then((e=>{console.log(e),200==e.code&&(this.locationOptions=e.message)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},dealPageSizeChange(e){console.log(e)},dealPageChange(e){this.showLoadingStatus=!0,this.dealPage=e,this.getDealsList(e,this.dealLimit),this.$router.push({path:"/deals",query:{page:e}})},addFavorite(e,t,a,s,i){let l={token:localStorage.getItem("token"),type:t,type_id:e,type_title:a,type_url:s};(0,F.q8)(l).then((e=>{console.log(e),200==e.code&&(this.$message.success("Success"),this.dealsListData[i]["is_favorite"]=1)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},cancelFavorite(e,t,a){let s={token:localStorage.getItem("token"),type:e,type_id:t};(0,F.Bv)(s).then((e=>{console.log(e),200==e.code&&(this.dealsListData[a]["is_favorite"]=0)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},addFavoriteFeatured(e,t,a,s,i){let l={token:localStorage.getItem("token"),type:t,type_id:e,type_title:a,type_url:s};(0,F.q8)(l).then((e=>{console.log(e),200==e.code&&(this.$message.success("Success"),this.featuredDealsData[i]["is_favorite"]=1)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},cancelFavoriteFeatured(e,t,a){let s={token:localStorage.getItem("token"),type:e,type_id:t};(0,F.Bv)(s).then((e=>{console.log(e),200==e.code&&(this.featuredDealsData[a]["is_favorite"]=0)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},offerDeal(){let e=localStorage.getItem("token"),t=this;if(!e||""==e)return this.$msgbox({title:"Offer a Deal",message:"Before offer a deal, you need to log in",type:"warning",confirmButtonText:"Log in",callback(e){if(console.log(e),"confirm"===e){let e={path:"/deals",query:{id:t.$route.query.id}},a=(0,P.cv)(JSON.stringify(e));t.$router.push({path:"/login",query:{redirect_params:a}})}}});let a=localStorage.getItem("identity");if(5!=a)return this.$message.error("Oops! Your current identity is not an vendor, please switch to Vendor");t.$router.push({path:"/deals/offer",query:{}})},selectRole(e){this.$loading({text:"Loading..."});let t={user_id:localStorage.getItem("uid"),identity:e};(0,F.Vd)(t).then((t=>{let a=t.message.user_contact,s={},i={},l=a.is_educator,o=a.is_recruiting,n=a.is_school,r=a.is_other,d=a.is_vendor,c=e;1==c&&(l>10?(s=t.message.user_contact.educator_contact,this.changeIdentity(s.id,1,2),this.$loading().close()):(this.$loading().close(),this.$router.push({path:"/profile/contact/user",query:{i:1}}))),2==c&&(o>10?(i=t.message.user_contact.company,this.changeIdentity(i.id,2,2),this.$loading().close()):(this.$loading().close(),this.$router.push({path:"/profile/contact/user",query:{i:2}}),this.dialogBusinessAccountVisible=!1)),3==c&&(n>10?(i=t.message.user_contact.company,this.changeIdentity(i.id,3,2),this.$loading().close()):(this.$loading().close(),this.$router.push({path:"/profile/contact/user",query:{i:3}}),this.dialogBusinessAccountVisible=!1)),4==c&&(r>10?(i=t.message.user_contact.company,this.changeIdentity(i.id,4,2),this.$loading().close()):(this.$loading().close(),this.$router.push({path:"/profile/contact/user",query:{i:4}}),this.dialogBusinessAccountVisible=!1)),5==c&&(d>10?(i=t.message.user_contact.company,this.changeIdentity(i.id,5,2),this.$loading().close()):(this.$loading().close(),this.$router.push({path:"/profile/contact/user",query:{i:5}})))})).catch((e=>{console.log(e),this.$loading().close(),this.$message.error(e.msg)}))},changeIdentity(e,t,a){let s={company_id:e,language:a,identity:t};(0,F.bv)(s).then((a=>{if(200==a.code){this.$store.commit("allIdentityChanged",!0),localStorage.setItem("company_id",e),localStorage.setItem("identity",t);let s=JSON.stringify(a.message);localStorage.setItem("menuData",s),this.$store.commit("identity",t),this.$store.commit("menuData",a.message),this.$loading().close()}})).catch((e=>{console.log(e),this.$loading().close(),this.$message.error(e.msg)}))},getFeaturedDealsList(){let e={};(0,F.dV)(e).then((e=>{console.log(e),200==e.code&&(this.featuredDealsData=e.message)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},getDealDetail(e){let t={deal_id:e,token:localStorage.getItem("token")};(0,F.kR)(t).then((e=>{console.log(e),200==e.code&&(this.detailData=e.message,this.showLoadingStatus=!1,this.initMap(e.message.lng,e.message.lat))})).catch((e=>{console.log(e),e.msg&&this.$message.error(e.msg),e.message&&this.$message.error(e.message)}))},initMap(e,t){H().accessToken=this.accessToken;const a=new(H().Map)({container:"mapContainer",center:[e,t],style:this.mapStyle,zoom:12}),s=new(H().NavigationControl);a.addControl(s,"top-right");const i=new(H().GeolocateControl)({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0});a.addControl(i,"top-right");const l=new(B())({accessToken:this.accessToken,mapboxgl:H()});a.addControl(l,"top-left");const o=new(H().Marker);o.setLngLat([e,t]).addTo(a)}}},A=a(8118);const U=(0,A.Z)(Z,[["render",q],["__scopeId","data-v-41207b5e"]]);var O=U}}]);
//# sourceMappingURL=4495.f886958f.js.map