"use strict";(self["webpackChunkeslweb"]=self["webpackChunkeslweb"]||[]).push([[4131],{4131:function(e,t,a){a.r(t),a.d(t,{default:function(){return Y}});var s=a(6252),o=a(6612);const i=e=>((0,s.dD)("data-v-73b80051"),e=e(),(0,s.Cn)(),e),l={class:"bg"},n={class:"job-title"},c={class:"job-address-salary"},r={class:"job-address"},d={class:"job-desc-container"},g=i((()=>(0,s._)("div",{class:"job-desc-label"},"Deal Description",-1))),h=i((()=>(0,s._)("div",{class:"job-desc-label-underline"},null,-1))),u={class:"job-desc-content"},m={key:0,class:"job-tags"},p={class:"address-container"},y=i((()=>(0,s._)("div",{class:"address-label"},"Address & Location",-1))),_=i((()=>(0,s._)("div",{class:"address-label-underline"},null,-1))),v={class:"address-content"},f={class:"address-address"},w=i((()=>(0,s._)("b",null,"Address:",-1))),D=i((()=>(0,s._)("div",{class:"address-location"},[(0,s._)("b",null,"Location: "),(0,s._)("div",{class:"map-container"},[(0,s._)("div",{id:"mapContainer",class:"basemap"})])],-1))),b={class:"deals-detail-share-container"},k=i((()=>(0,s._)("i",{class:"iconfont el-icon-alixll-heart-filled xll-heart-icon"},null,-1))),S=[k],$=i((()=>(0,s._)("i",{class:"iconfont el-icon-alixll-heart xll-heart-icon"},null,-1))),I=[$],C={class:"social-share-container"},x=i((()=>(0,s._)("i",{class:"iconfont el-icon-alitwitter xll-icon"},null,-1))),q=i((()=>(0,s._)("i",{class:"iconfont el-icon-alilinkedin xll-icon"},null,-1))),E=i((()=>(0,s._)("i",{class:"iconfont el-icon-alifacebook xll-icon"},null,-1))),j={class:"company-bio-container"},F=i((()=>(0,s._)("div",{class:"company-bio-label"},"Company Bio",-1))),M=i((()=>(0,s._)("div",{class:"company-bio-label-underline"},null,-1))),J={class:"company-bio-content"},L={class:"company-logo-container"},T={key:0,class:"company-bio-text"},U=i((()=>(0,s._)("div",{class:"view-profile-btn-container"},null,-1)));function V(e,t,a,i,k,$){const V=(0,s.up)("el-col"),N=(0,s.up)("Share"),W=(0,s.up)("el-icon"),B=(0,s.up)("ShareNetwork"),z=(0,s.up)("el-image"),A=(0,s.up)("el-row");return(0,s.wg)(),(0,s.iD)("div",l,[(0,s.Wm)(A,{class:"detail-row",align:"top",justify:"start"},{default:(0,s.w5)((()=>[(0,s.Wm)(V,{class:"detail-l-col",xs:24,sm:24,md:16,lg:16,xl:16},{default:(0,s.w5)((()=>[(0,s._)("div",n,(0,o.zw)(k.detailData.title),1),(0,s._)("div",c,[(0,s._)("div",r,(0,o.zw)(k.detailData.location),1)]),(0,s._)("div",d,[g,h,(0,s._)("div",u,(0,o.zw)(k.detailData.desc),1),k.detailData.tags?((0,s.wg)(),(0,s.iD)("div",m,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(k.detailData.tags,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"job-tag",key:t},(0,o.zw)(e.tag_name_en),1)))),128))])):(0,s.kq)("",!0)]),(0,s._)("div",p,[y,_,(0,s._)("div",v,[(0,s._)("div",f,[w,(0,s._)("span",null,(0,o.zw)(k.detailData.location),1)]),D])])])),_:1}),(0,s.Wm)(V,{xs:24,sm:24,md:8,lg:8,xl:8,class:"xll-deals-r-container"},{default:(0,s.w5)((()=>[(0,s._)("div",b,[1==k.isFavoriteValue?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"deals-favorite",onClick:t[0]||(t[0]=e=>$.cancelFavorite(2,k.detailData.id))},S)):((0,s.wg)(),(0,s.iD)("div",{key:1,class:"deals-favorite",onClick:t[1]||(t[1]=e=>$.addFavorite(k.detailData.id,2,k.detailData.title,k.detailData.company_logo))},I)),(0,s._)("div",C,[(0,s._)("div",{class:"social-share-icon-container",onClick:t[2]||(t[2]=e=>k.showSocialShareExpandStatus=!k.showSocialShareExpandStatus),onMouseover:t[3]||(t[3]=e=>k.showSocialShareExpandStatus=!0)},[(0,s.Wm)(W,{size:24},{default:(0,s.w5)((()=>[(0,s.Wm)(N)])),_:1})],32),k.showSocialShareExpandStatus?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"social-share-icon-expand",onMouseleave:t[4]||(t[4]=e=>k.showSocialShareExpandStatus=!1)},[(0,s.Wm)(B,{network:"Twitter",url:i.locationUrl,title:void 0==k.detailData.title?"":k.detailData.title},{default:(0,s.w5)((()=>[x])),_:1},8,["url","title"]),(0,s.Wm)(B,{network:"LinkedIn",url:i.locationUrl,title:void 0==k.detailData.title?"":k.detailData.title},{default:(0,s.w5)((()=>[q])),_:1},8,["url","title"]),(0,s.Wm)(B,{network:"Facebook",url:i.locationUrl,title:void 0==k.detailData.title?"":k.detailData.title,description:void 0==k.detailData.desc?"":k.detailData.desc,quote:void 0==k.detailData.title?"":k.detailData.title},{default:(0,s.w5)((()=>[E])),_:1},8,["url","title","description","quote"])],32)):(0,s.kq)("",!0)])]),(0,s._)("div",j,[F,M,(0,s._)("div",J,[(0,s._)("div",L,[k.detailData.company?((0,s.wg)(),(0,s.j4)(z,{key:0,class:"company-logo",src:k.detailData.company.logo},null,8,["src"])):(0,s.kq)("",!0)]),k.detailData.company?((0,s.wg)(),(0,s.iD)("div",T,(0,o.zw)(k.detailData.company.desc),1)):(0,s.kq)("",!0),U])])])),_:1})])),_:1})])}var N=a(6158),W=a.n(N),B=a(8847),z=a.n(B),A=a(1836),R=a(3907),G=a(4276),O={name:"detail",setup(){const e=(0,R.oR)(),t=t=>e.commit("nowChatUserInfo",t),a=()=>e.commit("showChatStatus",!0),s=window.location.href;return{setNowChatUserInfo:t,setShowChatStatus:a,locationUrl:s}},data(){return{accessToken:"pk.eyJ1Ijoic3JrbGluZ2UiLCJhIjoiY2t2NnR4anI2OWU5NDJ3bWE1dHd3c3h1aSJ9.O0JfjqiyBBkFuf4G-DQ-DQ",mapStyle:"mapbox://styles/mapbox/streets-v11",detailData:{},otherJobsData:[],isFavoriteValue:0,showSocialShareExpandStatus:!1}},components:{},mounted(){let e=this.$route.query.id;this.getDealDetail(e);let t=localStorage.getItem("token");t&&""!=t&&this.isFavorite(2,e)},methods:{viewCompanyProfile(e){this.$router.push({path:"/info/company",query:{id:e,identity:3}})},initMap(e,t){W().accessToken=this.accessToken;const a=new(W().Map)({container:"mapContainer",center:[e,t],style:this.mapStyle,zoom:12}),s=new(W().NavigationControl);a.addControl(s,"top-right");const o=new(W().GeolocateControl)({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0});a.addControl(o,"top-right");const i=new(z())({accessToken:this.accessToken,mapboxgl:W()});a.addControl(i,"top-left");const l=new(W().Marker);l.setLngLat([e,t]).addTo(a)},getDealDetail(e){let t={deal_id:e,token:localStorage.getItem("token")};(0,A.kR)(t).then((e=>{if(console.log(e),200==e.code){this.detailData=e.message,this.initMap(e.message.lng,e.message.lat);let t=e.message.user_id;this.getCompanyJobList(t)}})).catch((e=>{console.log(e),e.msg&&this.$message.error(e.msg),e.message&&this.$message.error(e.message)}))},getCompanyJobList(e){let t={user_id:e,is_open:1,status:1,page:1,limit:5};(0,A.kM)(t).then((e=>{console.log(e),200==e.code&&(this.otherJobsData=e.message.data)})).catch((e=>{console.log(e),e.msg&&this.$message.error(e.msg),e.message&&this.$message.error(e.message)}))},addFavorite(e,t,a,s){let o={token:localStorage.getItem("token"),type:t,type_id:e,type_title:a,type_url:s};(0,A.q8)(o).then((e=>{console.log(e),200==e.code&&(this.$message.success("Success"),this.isFavoriteValue=1)})).catch((e=>{console.log(e),e.msg&&this.$message.error(e.msg),e.message&&this.$message.error(e.message)}))},cancelFavorite(e,t){let a={token:localStorage.getItem("token"),type:e,type_id:t};(0,A.Bv)(a).then((e=>{console.log(e),200==e.code&&(this.isFavoriteValue=0)})).catch((e=>{console.log(e),e.msg&&this.$message.error(e.msg),e.message&&this.$message.error(e.message)}))},isFavorite(e,t){let a={token:localStorage.getItem("token"),type:e,type_id:t};(0,A.Lr)(a).then((e=>{console.log(e),200==e.code&&(this.isFavoriteValue=e.data)})).catch((e=>{console.log(e),e.msg&&this.$message.error(e.msg),e.message&&this.$message.error(e.message)}))},chat(e){console.log(e);let t=localStorage.getItem("token");if(!t||""===t)return this.$router.push("/login");let a,s=this.detailData.userInfo,o=this.GoEasy.IM_SCENE.PRIVATE,i=s.first_name+" "+s.last_name,l=s.profile_photo?s.profile_photo:"https://oss.esl-passport.cn/educator.png",n={uuid:e,name:i,avatar:l,identity:3},c=this.goEasy.im.createTextMessage({text:"Hello",to:{id:e,type:o,data:{name:i,avatar:l,identity:3}}});a=o===this.GoEasy.IM_SCENE.PRIVATE?this.service.getPrivateMessages(e):this.service.getGroupMessages(e),a.push(c),this.goEasy.im.sendMessage({message:c,onSuccess:function(e){console.log("发送成功.",e)},onFailed:function(e){console.log("发送失败:",e)}}),this.setShowChatStatus(),this.setNowChatUserInfo(n)},addUserToChat(e,t,a){let s={identity:a,to_identity:t,to_user_id:e};(0,A.Yl)(s).then((e=>{200===e.code&&console.log("add Chat successfuly")})).catch((e=>{console.log(e),e.msg&&this.$message.error(e.msg),e.message&&this.$message.error(e.message)}))},offerDeal(){let e=localStorage.getItem("token"),t=this;if(!e||""==e)return this.$msgbox({title:"Offer a Deal",message:"Before offer a deal, you need to log in",type:"warning",confirmButtonText:"Log in",callback(e){if(console.log(e),"confirm"===e){let e={path:"/deals/detail",query:{id:t.$route.query.id}},a=(0,G.cv)(JSON.stringify(e));t.$router.push({path:"/login",query:{redirect_params:a}})}}});let a=localStorage.getItem("identity");3!=a&&this.selectRole(3),t.$router.push({path:"/deals/offer",query:{}})},selectRole(e){this.$loading({text:"Loading..."});let t={user_id:localStorage.getItem("uid"),identity:e};(0,A.Vd)(t).then((t=>{let a=t.message.user_contact,s={},o={},i=a.is_educator,l=a.is_recruiting,n=a.is_school,c=a.is_other,r=a.is_vendor,d=e;1==d&&(i>10?(s=t.message.user_contact.educator_contact,this.changeIdentity(s.id,1,2),this.$loading().close()):(this.$loading().close(),this.$router.push({path:"/profile/contact/user",query:{i:1}}))),2==d&&(l>10?(o=t.message.user_contact.company,this.changeIdentity(o.id,2,2),this.$loading().close()):(this.$loading().close(),this.$router.push({path:"/profile/contact/user",query:{i:2}}),this.dialogBusinessAccountVisible=!1)),3==d&&(n>10?(o=t.message.user_contact.company,this.changeIdentity(o.id,3,2),this.$loading().close()):(this.$loading().close(),this.$router.push({path:"/profile/contact/user",query:{i:3}}),this.dialogBusinessAccountVisible=!1)),4==d&&(c>10?(o=t.message.user_contact.company,this.changeIdentity(o.id,4,2),this.$loading().close()):(this.$loading().close(),this.$router.push({path:"/profile/contact/user",query:{i:4}}),this.dialogBusinessAccountVisible=!1)),5==d&&(r>10?(o=t.message.user_contact.company,this.changeIdentity(o.id,5,2),this.$loading().close()):(this.$loading().close(),this.$router.push({path:"/profile/contact/user",query:{i:5}})))})).catch((e=>{console.log(e),this.$loading().close(),this.$message.error(e.msg)}))},changeIdentity(e,t,a){let s={company_id:e,language:a,identity:t};(0,A.bv)(s).then((a=>{if(200==a.code){this.$store.commit("allIdentityChanged",!0),localStorage.setItem("company_id",e),localStorage.setItem("identity",t);let s=JSON.stringify(a.message);localStorage.setItem("menuData",s),this.$store.commit("identity",t),this.$store.commit("menuData",a.message),this.$loading().close()}})).catch((e=>{console.log(e),this.$loading().close(),this.$message.error(e.msg)}))}}},H=a(8118);const P=(0,H.Z)(O,[["render",V],["__scopeId","data-v-73b80051"]]);var Y=P}}]);
//# sourceMappingURL=4131.2269dbb3.js.map